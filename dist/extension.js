"use strict";var ni=Object.create;var Se=Object.defineProperty;var ii=Object.getOwnPropertyDescriptor;var ri=Object.getOwnPropertyNames;var ti=Object.getPrototypeOf,oi=Object.prototype.hasOwnProperty;var si=(e,n)=>{for(var i in n)Se(e,i,{get:n[i],enumerable:!0})},nn=(e,n,i,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of ri(n))!oi.call(e,t)&&t!==i&&Se(e,t,{get:()=>n[t],enumerable:!(r=ii(n,t))||r.enumerable});return e};var Me=(e,n,i)=>(i=e!=null?ni(ti(e)):{},nn(n||!e||!e.__esModule?Se(i,"default",{value:e,enumerable:!0}):i,e)),ci=e=>nn(Se({},"__esModule",{value:!0}),e);var Nt={};si(Nt,{activate:()=>Lt,deactivate:()=>jt});module.exports=ci(Nt);var u=Me(require("vscode")),Yn=require("child_process"),ze=require("fs/promises"),Je=require("fs"),Vn=require("util");function vn(e){return typeof e>"u"||e===null}function ai(e){return typeof e=="object"&&e!==null}function li(e){return Array.isArray(e)?e:vn(e)?[]:[e]}function ui(e,n){var i,r,t,s;if(n)for(s=Object.keys(n),i=0,r=s.length;i<r;i+=1)t=s[i],e[t]=n[t];return e}function di(e,n){var i="",r;for(r=0;r<n;r+=1)i+=e;return i}function fi(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var pi=vn,mi=ai,gi=li,hi=di,wi=fi,vi=ui,N={isNothing:pi,isObject:mi,toArray:gi,repeat:hi,isNegativeZero:wi,extend:vi};function yn(e,n){var i="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(i+='in "'+e.mark.name+'" '),i+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(i+=`

`+e.mark.snippet),r+" "+i):r}function he(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=yn(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}he.prototype=Object.create(Error.prototype);he.prototype.constructor=he;he.prototype.toString=function(n){return this.name+": "+yn(this,n)};var W=he;function Le(e,n,i,r,t){var s="",o="",c=Math.floor(t/2)-1;return r-n>c&&(s=" ... ",n=r-c+s.length),i-r>c&&(o=" ...",i=r+c-o.length),{str:s+e.slice(n,i).replace(/\t/g,"\u2192")+o,pos:r-n+s.length}}function je(e,n){return N.repeat(" ",n-e.length)+e}function yi(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var i=/\r?\n|\r|\0/g,r=[0],t=[],s,o=-1;s=i.exec(e.buffer);)t.push(s.index),r.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var c="",a,d,h=Math.min(e.line+n.linesAfter,t.length).toString().length,p=n.maxLength-(n.indent+h+3);for(a=1;a<=n.linesBefore&&!(o-a<0);a++)d=Le(e.buffer,r[o-a],t[o-a],e.position-(r[o]-r[o-a]),p),c=N.repeat(" ",n.indent)+je((e.line-a+1).toString(),h)+" | "+d.str+`
`+c;for(d=Le(e.buffer,r[o],t[o],e.position,p),c+=N.repeat(" ",n.indent)+je((e.line+1).toString(),h)+" | "+d.str+`
`,c+=N.repeat("-",n.indent+h+3+d.pos)+`^
`,a=1;a<=n.linesAfter&&!(o+a>=t.length);a++)d=Le(e.buffer,r[o+a],t[o+a],e.position-(r[o]-r[o+a]),p),c+=N.repeat(" ",n.indent)+je((e.line+a+1).toString(),h)+" | "+d.str+`
`;return c.replace(/\n$/,"")}var Ci=yi,ki=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],xi=["scalar","sequence","mapping"];function bi(e){var n={};return e!==null&&Object.keys(e).forEach(function(i){e[i].forEach(function(r){n[String(r)]=i})}),n}function Si(e,n){if(n=n||{},Object.keys(n).forEach(function(i){if(ki.indexOf(i)===-1)throw new W('Unknown option "'+i+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(i){return i},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=bi(n.styleAliases||null),xi.indexOf(this.kind)===-1)throw new W('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var $=Si;function rn(e,n){var i=[];return e[n].forEach(function(r){var t=i.length;i.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(t=o)}),i[t]=r}),i}function Ii(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,i;function r(t){t.multi?(e.multi[t.kind].push(t),e.multi.fallback.push(t)):e[t.kind][t.tag]=e.fallback[t.tag]=t}for(n=0,i=arguments.length;n<i;n+=1)arguments[n].forEach(r);return e}function $e(e){return this.extend(e)}$e.prototype.extend=function(n){var i=[],r=[];if(n instanceof $)r.push(n);else if(Array.isArray(n))r=r.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(i=i.concat(n.implicit)),n.explicit&&(r=r.concat(n.explicit));else throw new W("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(s){if(!(s instanceof $))throw new W("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new W("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new W("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof $))throw new W("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var t=Object.create($e.prototype);return t.implicit=(this.implicit||[]).concat(i),t.explicit=(this.explicit||[]).concat(r),t.compiledImplicit=rn(t,"implicit"),t.compiledExplicit=rn(t,"explicit"),t.compiledTypeMap=Ii(t.compiledImplicit,t.compiledExplicit),t};var Ai=$e,Oi=new $("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Fi=new $("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Ei=new $("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Ti=new Ai({explicit:[Oi,Fi,Ei]});function Pi(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function Di(){return null}function _i(e){return e===null}var Ri=new $("tag:yaml.org,2002:null",{kind:"scalar",resolve:Pi,construct:Di,predicate:_i,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Mi(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function Li(e){return e==="true"||e==="True"||e==="TRUE"}function ji(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Ni=new $("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Mi,construct:Li,predicate:ji,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function $i(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ki(e){return 48<=e&&e<=55}function Ui(e){return 48<=e&&e<=57}function Wi(e){if(e===null)return!1;var n=e.length,i=0,r=!1,t;if(!n)return!1;if(t=e[i],(t==="-"||t==="+")&&(t=e[++i]),t==="0"){if(i+1===n)return!0;if(t=e[++i],t==="b"){for(i++;i<n;i++)if(t=e[i],t!=="_"){if(t!=="0"&&t!=="1")return!1;r=!0}return r&&t!=="_"}if(t==="x"){for(i++;i<n;i++)if(t=e[i],t!=="_"){if(!$i(e.charCodeAt(i)))return!1;r=!0}return r&&t!=="_"}if(t==="o"){for(i++;i<n;i++)if(t=e[i],t!=="_"){if(!Ki(e.charCodeAt(i)))return!1;r=!0}return r&&t!=="_"}}if(t==="_")return!1;for(;i<n;i++)if(t=e[i],t!=="_"){if(!Ui(e.charCodeAt(i)))return!1;r=!0}return!(!r||t==="_")}function Bi(e){var n=e,i=1,r;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),r=n[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),n=n.slice(1),r=n[0]),n==="0")return 0;if(r==="0"){if(n[1]==="b")return i*parseInt(n.slice(2),2);if(n[1]==="x")return i*parseInt(n.slice(2),16);if(n[1]==="o")return i*parseInt(n.slice(2),8)}return i*parseInt(n,10)}function Qi(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!N.isNegativeZero(e)}var Hi=new $("tag:yaml.org,2002:int",{kind:"scalar",resolve:Wi,construct:Bi,predicate:Qi,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Yi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Vi(e){return!(e===null||!Yi.test(e)||e[e.length-1]==="_")}function qi(e){var n,i;return n=e.replace(/_/g,"").toLowerCase(),i=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:i*parseFloat(n,10)}var Gi=/^[-+]?[0-9]+e/;function zi(e,n){var i;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(N.isNegativeZero(e))return"-0.0";return i=e.toString(10),Gi.test(i)?i.replace("e",".e"):i}function Ji(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||N.isNegativeZero(e))}var Xi=new $("tag:yaml.org,2002:float",{kind:"scalar",resolve:Vi,construct:qi,predicate:Ji,represent:zi,defaultStyle:"lowercase"}),Zi=Ti.extend({implicit:[Ri,Ni,Hi,Xi]}),er=Zi,Cn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),kn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function nr(e){return e===null?!1:Cn.exec(e)!==null||kn.exec(e)!==null}function ir(e){var n,i,r,t,s,o,c,a=0,d=null,h,p,v;if(n=Cn.exec(e),n===null&&(n=kn.exec(e)),n===null)throw new Error("Date resolve error");if(i=+n[1],r=+n[2]-1,t=+n[3],!n[4])return new Date(Date.UTC(i,r,t));if(s=+n[4],o=+n[5],c=+n[6],n[7]){for(a=n[7].slice(0,3);a.length<3;)a+="0";a=+a}return n[9]&&(h=+n[10],p=+(n[11]||0),d=(h*60+p)*6e4,n[9]==="-"&&(d=-d)),v=new Date(Date.UTC(i,r,t,s,o,c,a)),d&&v.setTime(v.getTime()-d),v}function rr(e){return e.toISOString()}var tr=new $("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:nr,construct:ir,instanceOf:Date,represent:rr});function or(e){return e==="<<"||e===null}var sr=new $("tag:yaml.org,2002:merge",{kind:"scalar",resolve:or}),Qe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function cr(e){if(e===null)return!1;var n,i,r=0,t=e.length,s=Qe;for(i=0;i<t;i++)if(n=s.indexOf(e.charAt(i)),!(n>64)){if(n<0)return!1;r+=6}return r%8===0}function ar(e){var n,i,r=e.replace(/[\r\n=]/g,""),t=r.length,s=Qe,o=0,c=[];for(n=0;n<t;n++)n%4===0&&n&&(c.push(o>>16&255),c.push(o>>8&255),c.push(o&255)),o=o<<6|s.indexOf(r.charAt(n));return i=t%4*6,i===0?(c.push(o>>16&255),c.push(o>>8&255),c.push(o&255)):i===18?(c.push(o>>10&255),c.push(o>>2&255)):i===12&&c.push(o>>4&255),new Uint8Array(c)}function lr(e){var n="",i=0,r,t,s=e.length,o=Qe;for(r=0;r<s;r++)r%3===0&&r&&(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[i&63]),i=(i<<8)+e[r];return t=s%3,t===0?(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[i&63]):t===2?(n+=o[i>>10&63],n+=o[i>>4&63],n+=o[i<<2&63],n+=o[64]):t===1&&(n+=o[i>>2&63],n+=o[i<<4&63],n+=o[64],n+=o[64]),n}function ur(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var dr=new $("tag:yaml.org,2002:binary",{kind:"scalar",resolve:cr,construct:ar,predicate:ur,represent:lr}),fr=Object.prototype.hasOwnProperty,pr=Object.prototype.toString;function mr(e){if(e===null)return!0;var n=[],i,r,t,s,o,c=e;for(i=0,r=c.length;i<r;i+=1){if(t=c[i],o=!1,pr.call(t)!=="[object Object]")return!1;for(s in t)if(fr.call(t,s))if(!o)o=!0;else return!1;if(!o)return!1;if(n.indexOf(s)===-1)n.push(s);else return!1}return!0}function gr(e){return e!==null?e:[]}var hr=new $("tag:yaml.org,2002:omap",{kind:"sequence",resolve:mr,construct:gr}),wr=Object.prototype.toString;function vr(e){if(e===null)return!0;var n,i,r,t,s,o=e;for(s=new Array(o.length),n=0,i=o.length;n<i;n+=1){if(r=o[n],wr.call(r)!=="[object Object]"||(t=Object.keys(r),t.length!==1))return!1;s[n]=[t[0],r[t[0]]]}return!0}function yr(e){if(e===null)return[];var n,i,r,t,s,o=e;for(s=new Array(o.length),n=0,i=o.length;n<i;n+=1)r=o[n],t=Object.keys(r),s[n]=[t[0],r[t[0]]];return s}var Cr=new $("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:vr,construct:yr}),kr=Object.prototype.hasOwnProperty;function xr(e){if(e===null)return!0;var n,i=e;for(n in i)if(kr.call(i,n)&&i[n]!==null)return!1;return!0}function br(e){return e!==null?e:{}}var Sr=new $("tag:yaml.org,2002:set",{kind:"mapping",resolve:xr,construct:br}),xn=er.extend({implicit:[tr,sr],explicit:[dr,hr,Cr,Sr]}),Z=Object.prototype.hasOwnProperty,Ie=1,bn=2,Sn=3,Ae=4,Ne=1,Ir=2,tn=3,Ar=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Or=/[\x85\u2028\u2029]/,Fr=/[,\[\]\{\}]/,In=/^(?:!|!!|![a-z\-]+!)$/i,An=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function on(e){return Object.prototype.toString.call(e)}function V(e){return e===10||e===13}function te(e){return e===9||e===32}function B(e){return e===9||e===32||e===10||e===13}function de(e){return e===44||e===91||e===93||e===123||e===125}function Er(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function Tr(e){return e===120?2:e===117?4:e===85?8:0}function Pr(e){return 48<=e&&e<=57?e-48:-1}function sn(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Dr(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var On=new Array(256),Fn=new Array(256);for(re=0;re<256;re++)On[re]=sn(re)?1:0,Fn[re]=sn(re);var re;function _r(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||xn,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function En(e,n){var i={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return i.snippet=Ci(i),new W(n,i)}function S(e,n){throw En(e,n)}function Oe(e,n){e.onWarning&&e.onWarning.call(null,En(e,n))}var cn={YAML:function(n,i,r){var t,s,o;n.version!==null&&S(n,"duplication of %YAML directive"),r.length!==1&&S(n,"YAML directive accepts exactly one argument"),t=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),t===null&&S(n,"ill-formed argument of the YAML directive"),s=parseInt(t[1],10),o=parseInt(t[2],10),s!==1&&S(n,"unacceptable YAML version of the document"),n.version=r[0],n.checkLineBreaks=o<2,o!==1&&o!==2&&Oe(n,"unsupported YAML version of the document")},TAG:function(n,i,r){var t,s;r.length!==2&&S(n,"TAG directive accepts exactly two arguments"),t=r[0],s=r[1],In.test(t)||S(n,"ill-formed tag handle (first argument) of the TAG directive"),Z.call(n.tagMap,t)&&S(n,'there is a previously declared suffix for "'+t+'" tag handle'),An.test(s)||S(n,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{S(n,"tag prefix is malformed: "+s)}n.tagMap[t]=s}};function X(e,n,i,r){var t,s,o,c;if(n<i){if(c=e.input.slice(n,i),r)for(t=0,s=c.length;t<s;t+=1)o=c.charCodeAt(t),o===9||32<=o&&o<=1114111||S(e,"expected valid JSON character");else Ar.test(c)&&S(e,"the stream contains non-printable characters");e.result+=c}}function an(e,n,i,r){var t,s,o,c;for(N.isObject(i)||S(e,"cannot merge mappings; the provided source object is unacceptable"),t=Object.keys(i),o=0,c=t.length;o<c;o+=1)s=t[o],Z.call(n,s)||(n[s]=i[s],r[s]=!0)}function fe(e,n,i,r,t,s,o,c,a){var d,h;if(Array.isArray(t))for(t=Array.prototype.slice.call(t),d=0,h=t.length;d<h;d+=1)Array.isArray(t[d])&&S(e,"nested arrays are not supported inside keys"),typeof t=="object"&&on(t[d])==="[object Object]"&&(t[d]="[object Object]");if(typeof t=="object"&&on(t)==="[object Object]"&&(t="[object Object]"),t=String(t),n===null&&(n={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(d=0,h=s.length;d<h;d+=1)an(e,n,s[d],i);else an(e,n,s,i);else!e.json&&!Z.call(i,t)&&Z.call(n,t)&&(e.line=o||e.line,e.lineStart=c||e.lineStart,e.position=a||e.position,S(e,"duplicated mapping key")),t==="__proto__"?Object.defineProperty(n,t,{configurable:!0,enumerable:!0,writable:!0,value:s}):n[t]=s,delete i[t];return n}function He(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):S(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function j(e,n,i){for(var r=0,t=e.input.charCodeAt(e.position);t!==0;){for(;te(t);)t===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),t=e.input.charCodeAt(++e.position);if(n&&t===35)do t=e.input.charCodeAt(++e.position);while(t!==10&&t!==13&&t!==0);if(V(t))for(He(e),t=e.input.charCodeAt(e.position),r++,e.lineIndent=0;t===32;)e.lineIndent++,t=e.input.charCodeAt(++e.position);else break}return i!==-1&&r!==0&&e.lineIndent<i&&Oe(e,"deficient indentation"),r}function Te(e){var n=e.position,i;return i=e.input.charCodeAt(n),!!((i===45||i===46)&&i===e.input.charCodeAt(n+1)&&i===e.input.charCodeAt(n+2)&&(n+=3,i=e.input.charCodeAt(n),i===0||B(i)))}function Ye(e,n){n===1?e.result+=" ":n>1&&(e.result+=N.repeat(`
`,n-1))}function Rr(e,n,i){var r,t,s,o,c,a,d,h,p=e.kind,v=e.result,g;if(g=e.input.charCodeAt(e.position),B(g)||de(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(t=e.input.charCodeAt(e.position+1),B(t)||i&&de(t)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,c=!1;g!==0;){if(g===58){if(t=e.input.charCodeAt(e.position+1),B(t)||i&&de(t))break}else if(g===35){if(r=e.input.charCodeAt(e.position-1),B(r))break}else{if(e.position===e.lineStart&&Te(e)||i&&de(g))break;if(V(g))if(a=e.line,d=e.lineStart,h=e.lineIndent,j(e,!1,-1),e.lineIndent>=n){c=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=a,e.lineStart=d,e.lineIndent=h;break}}c&&(X(e,s,o,!1),Ye(e,e.line-a),s=o=e.position,c=!1),te(g)||(o=e.position+1),g=e.input.charCodeAt(++e.position)}return X(e,s,o,!1),e.result?!0:(e.kind=p,e.result=v,!1)}function Mr(e,n){var i,r,t;if(i=e.input.charCodeAt(e.position),i!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=t=e.position;(i=e.input.charCodeAt(e.position))!==0;)if(i===39)if(X(e,r,e.position,!0),i=e.input.charCodeAt(++e.position),i===39)r=e.position,e.position++,t=e.position;else return!0;else V(i)?(X(e,r,t,!0),Ye(e,j(e,!1,n)),r=t=e.position):e.position===e.lineStart&&Te(e)?S(e,"unexpected end of the document within a single quoted scalar"):(e.position++,t=e.position);S(e,"unexpected end of the stream within a single quoted scalar")}function Lr(e,n){var i,r,t,s,o,c;if(c=e.input.charCodeAt(e.position),c!==34)return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;(c=e.input.charCodeAt(e.position))!==0;){if(c===34)return X(e,i,e.position,!0),e.position++,!0;if(c===92){if(X(e,i,e.position,!0),c=e.input.charCodeAt(++e.position),V(c))j(e,!1,n);else if(c<256&&On[c])e.result+=Fn[c],e.position++;else if((o=Tr(c))>0){for(t=o,s=0;t>0;t--)c=e.input.charCodeAt(++e.position),(o=Er(c))>=0?s=(s<<4)+o:S(e,"expected hexadecimal character");e.result+=Dr(s),e.position++}else S(e,"unknown escape sequence");i=r=e.position}else V(c)?(X(e,i,r,!0),Ye(e,j(e,!1,n)),i=r=e.position):e.position===e.lineStart&&Te(e)?S(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}S(e,"unexpected end of the stream within a double quoted scalar")}function jr(e,n){var i=!0,r,t,s,o=e.tag,c,a=e.anchor,d,h,p,v,g,C=Object.create(null),b,A,D,F;if(F=e.input.charCodeAt(e.position),F===91)h=93,g=!1,c=[];else if(F===123)h=125,g=!0,c={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),F=e.input.charCodeAt(++e.position);F!==0;){if(j(e,!0,n),F=e.input.charCodeAt(e.position),F===h)return e.position++,e.tag=o,e.anchor=a,e.kind=g?"mapping":"sequence",e.result=c,!0;i?F===44&&S(e,"expected the node content, but found ','"):S(e,"missed comma between flow collection entries"),A=b=D=null,p=v=!1,F===63&&(d=e.input.charCodeAt(e.position+1),B(d)&&(p=v=!0,e.position++,j(e,!0,n))),r=e.line,t=e.lineStart,s=e.position,pe(e,n,Ie,!1,!0),A=e.tag,b=e.result,j(e,!0,n),F=e.input.charCodeAt(e.position),(v||e.line===r)&&F===58&&(p=!0,F=e.input.charCodeAt(++e.position),j(e,!0,n),pe(e,n,Ie,!1,!0),D=e.result),g?fe(e,c,C,A,b,D,r,t,s):p?c.push(fe(e,null,C,A,b,D,r,t,s)):c.push(b),j(e,!0,n),F=e.input.charCodeAt(e.position),F===44?(i=!0,F=e.input.charCodeAt(++e.position)):i=!1}S(e,"unexpected end of the stream within a flow collection")}function Nr(e,n){var i,r,t=Ne,s=!1,o=!1,c=n,a=0,d=!1,h,p;if(p=e.input.charCodeAt(e.position),p===124)r=!1;else if(p===62)r=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)Ne===t?t=p===43?tn:Ir:S(e,"repeat of a chomping mode identifier");else if((h=Pr(p))>=0)h===0?S(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?S(e,"repeat of an indentation width identifier"):(c=n+h-1,o=!0);else break;if(te(p)){do p=e.input.charCodeAt(++e.position);while(te(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!V(p)&&p!==0)}for(;p!==0;){for(He(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!o||e.lineIndent<c)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>c&&(c=e.lineIndent),V(p)){a++;continue}if(e.lineIndent<c){t===tn?e.result+=N.repeat(`
`,s?1+a:a):t===Ne&&s&&(e.result+=`
`);break}for(r?te(p)?(d=!0,e.result+=N.repeat(`
`,s?1+a:a)):d?(d=!1,e.result+=N.repeat(`
`,a+1)):a===0?s&&(e.result+=" "):e.result+=N.repeat(`
`,a):e.result+=N.repeat(`
`,s?1+a:a),s=!0,o=!0,a=0,i=e.position;!V(p)&&p!==0;)p=e.input.charCodeAt(++e.position);X(e,i,e.position,!1)}return!0}function ln(e,n){var i,r=e.tag,t=e.anchor,s=[],o,c=!1,a;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),a=e.input.charCodeAt(e.position);a!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),!(a!==45||(o=e.input.charCodeAt(e.position+1),!B(o))));){if(c=!0,e.position++,j(e,!0,-1)&&e.lineIndent<=n){s.push(null),a=e.input.charCodeAt(e.position);continue}if(i=e.line,pe(e,n,Sn,!1,!0),s.push(e.result),j(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===i||e.lineIndent>n)&&a!==0)S(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return c?(e.tag=r,e.anchor=t,e.kind="sequence",e.result=s,!0):!1}function $r(e,n,i){var r,t,s,o,c,a,d=e.tag,h=e.anchor,p={},v=Object.create(null),g=null,C=null,b=null,A=!1,D=!1,F;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),F=e.input.charCodeAt(e.position);F!==0;){if(!A&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),s=e.line,(F===63||F===58)&&B(r))F===63?(A&&(fe(e,p,v,g,C,null,o,c,a),g=C=b=null),D=!0,A=!0,t=!0):A?(A=!1,t=!0):S(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,F=r;else{if(o=e.line,c=e.lineStart,a=e.position,!pe(e,i,bn,!1,!0))break;if(e.line===s){for(F=e.input.charCodeAt(e.position);te(F);)F=e.input.charCodeAt(++e.position);if(F===58)F=e.input.charCodeAt(++e.position),B(F)||S(e,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(fe(e,p,v,g,C,null,o,c,a),g=C=b=null),D=!0,A=!1,t=!1,g=e.tag,C=e.result;else if(D)S(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=h,!0}else if(D)S(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=h,!0}if((e.line===s||e.lineIndent>n)&&(A&&(o=e.line,c=e.lineStart,a=e.position),pe(e,n,Ae,!0,t)&&(A?C=e.result:b=e.result),A||(fe(e,p,v,g,C,b,o,c,a),g=C=b=null),j(e,!0,-1),F=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>n)&&F!==0)S(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return A&&fe(e,p,v,g,C,null,o,c,a),D&&(e.tag=d,e.anchor=h,e.kind="mapping",e.result=p),D}function Kr(e){var n,i=!1,r=!1,t,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&S(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(i=!0,o=e.input.charCodeAt(++e.position)):o===33?(r=!0,t="!!",o=e.input.charCodeAt(++e.position)):t="!",n=e.position,i){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(n,e.position),o=e.input.charCodeAt(++e.position)):S(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!B(o);)o===33&&(r?S(e,"tag suffix cannot contain exclamation marks"):(t=e.input.slice(n-1,e.position+1),In.test(t)||S(e,"named tag handle cannot contain such characters"),r=!0,n=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(n,e.position),Fr.test(s)&&S(e,"tag suffix cannot contain flow indicator characters")}s&&!An.test(s)&&S(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{S(e,"tag name is malformed: "+s)}return i?e.tag=s:Z.call(e.tagMap,t)?e.tag=e.tagMap[t]+s:t==="!"?e.tag="!"+s:t==="!!"?e.tag="tag:yaml.org,2002:"+s:S(e,'undeclared tag handle "'+t+'"'),!0}function Ur(e){var n,i;if(i=e.input.charCodeAt(e.position),i!==38)return!1;for(e.anchor!==null&&S(e,"duplication of an anchor property"),i=e.input.charCodeAt(++e.position),n=e.position;i!==0&&!B(i)&&!de(i);)i=e.input.charCodeAt(++e.position);return e.position===n&&S(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function Wr(e){var n,i,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),n=e.position;r!==0&&!B(r)&&!de(r);)r=e.input.charCodeAt(++e.position);return e.position===n&&S(e,"name of an alias node must contain at least one character"),i=e.input.slice(n,e.position),Z.call(e.anchorMap,i)||S(e,'unidentified alias "'+i+'"'),e.result=e.anchorMap[i],j(e,!0,-1),!0}function pe(e,n,i,r,t){var s,o,c,a=1,d=!1,h=!1,p,v,g,C,b,A;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=c=Ae===i||Sn===i,r&&j(e,!0,-1)&&(d=!0,e.lineIndent>n?a=1:e.lineIndent===n?a=0:e.lineIndent<n&&(a=-1)),a===1)for(;Kr(e)||Ur(e);)j(e,!0,-1)?(d=!0,c=s,e.lineIndent>n?a=1:e.lineIndent===n?a=0:e.lineIndent<n&&(a=-1)):c=!1;if(c&&(c=d||t),(a===1||Ae===i)&&(Ie===i||bn===i?b=n:b=n+1,A=e.position-e.lineStart,a===1?c&&(ln(e,A)||$r(e,A,b))||jr(e,b)?h=!0:(o&&Nr(e,b)||Mr(e,b)||Lr(e,b)?h=!0:Wr(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&S(e,"alias node should not have any properties")):Rr(e,b,Ie===i)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):a===0&&(h=c&&ln(e,A))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&S(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,v=e.implicitTypes.length;p<v;p+=1)if(C=e.implicitTypes[p],C.resolve(e.result)){e.result=C.construct(e.result),e.tag=C.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Z.call(e.typeMap[e.kind||"fallback"],e.tag))C=e.typeMap[e.kind||"fallback"][e.tag];else for(C=null,g=e.typeMap.multi[e.kind||"fallback"],p=0,v=g.length;p<v;p+=1)if(e.tag.slice(0,g[p].tag.length)===g[p].tag){C=g[p];break}C||S(e,"unknown tag !<"+e.tag+">"),e.result!==null&&C.kind!==e.kind&&S(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+C.kind+'", not "'+e.kind+'"'),C.resolve(e.result,e.tag)?(e.result=C.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):S(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}function Br(e){var n=e.position,i,r,t,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(j(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),i=e.position;o!==0&&!B(o);)o=e.input.charCodeAt(++e.position);for(r=e.input.slice(i,e.position),t=[],r.length<1&&S(e,"directive name must not be less than one character in length");o!==0;){for(;te(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!V(o));break}if(V(o))break;for(i=e.position;o!==0&&!B(o);)o=e.input.charCodeAt(++e.position);t.push(e.input.slice(i,e.position))}o!==0&&He(e),Z.call(cn,r)?cn[r](e,r,t):Oe(e,'unknown document directive "'+r+'"')}if(j(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,j(e,!0,-1)):s&&S(e,"directives end mark is expected"),pe(e,e.lineIndent-1,Ae,!1,!0),j(e,!0,-1),e.checkLineBreaks&&Or.test(e.input.slice(n,e.position))&&Oe(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Te(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,j(e,!0,-1));return}if(e.position<e.length-1)S(e,"end of the stream or a document separator is expected");else return}function Tn(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var i=new _r(e,n),r=e.indexOf("\0");for(r!==-1&&(i.position=r,S(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)Br(i);return i.documents}function Qr(e,n,i){n!==null&&typeof n=="object"&&typeof i>"u"&&(i=n,n=null);var r=Tn(e,i);if(typeof n!="function")return r;for(var t=0,s=r.length;t<s;t+=1)n(r[t])}function Hr(e,n){var i=Tn(e,n);if(i.length!==0){if(i.length===1)return i[0];throw new W("expected a single document in the stream, but found more")}}var Yr=Qr,Vr=Hr,Pn={loadAll:Yr,load:Vr},Dn=Object.prototype.toString,_n=Object.prototype.hasOwnProperty,Ve=65279,qr=9,we=10,Gr=13,zr=32,Jr=33,Xr=34,Ke=35,Zr=37,et=38,nt=39,it=42,Rn=44,rt=45,Fe=58,tt=61,ot=62,st=63,ct=64,Mn=91,Ln=93,at=96,jn=123,lt=124,Nn=125,K={};K[0]="\\0";K[7]="\\a";K[8]="\\b";K[9]="\\t";K[10]="\\n";K[11]="\\v";K[12]="\\f";K[13]="\\r";K[27]="\\e";K[34]='\\"';K[92]="\\\\";K[133]="\\N";K[160]="\\_";K[8232]="\\L";K[8233]="\\P";var ut=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],dt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ft(e,n){var i,r,t,s,o,c,a;if(n===null)return{};for(i={},r=Object.keys(n),t=0,s=r.length;t<s;t+=1)o=r[t],c=String(n[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),a=e.compiledTypeMap.fallback[o],a&&_n.call(a.styleAliases,c)&&(c=a.styleAliases[c]),i[o]=c;return i}function pt(e){var n,i,r;if(n=e.toString(16).toUpperCase(),e<=255)i="x",r=2;else if(e<=65535)i="u",r=4;else if(e<=4294967295)i="U",r=8;else throw new W("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+i+N.repeat("0",r-n.length)+n}var mt=1,ve=2;function gt(e){this.schema=e.schema||xn,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=N.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=ft(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?ve:mt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function un(e,n){for(var i=N.repeat(" ",n),r=0,t=-1,s="",o,c=e.length;r<c;)t=e.indexOf(`
`,r),t===-1?(o=e.slice(r),r=c):(o=e.slice(r,t+1),r=t+1),o.length&&o!==`
`&&(s+=i),s+=o;return s}function Ue(e,n){return`
`+N.repeat(" ",e.indent*n)}function ht(e,n){var i,r,t;for(i=0,r=e.implicitTypes.length;i<r;i+=1)if(t=e.implicitTypes[i],t.resolve(n))return!0;return!1}function Ee(e){return e===zr||e===qr}function ye(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Ve||65536<=e&&e<=1114111}function dn(e){return ye(e)&&e!==Ve&&e!==Gr&&e!==we}function fn(e,n,i){var r=dn(e),t=r&&!Ee(e);return(i?r:r&&e!==Rn&&e!==Mn&&e!==Ln&&e!==jn&&e!==Nn)&&e!==Ke&&!(n===Fe&&!t)||dn(n)&&!Ee(n)&&e===Ke||n===Fe&&t}function wt(e){return ye(e)&&e!==Ve&&!Ee(e)&&e!==rt&&e!==st&&e!==Fe&&e!==Rn&&e!==Mn&&e!==Ln&&e!==jn&&e!==Nn&&e!==Ke&&e!==et&&e!==it&&e!==Jr&&e!==lt&&e!==tt&&e!==ot&&e!==nt&&e!==Xr&&e!==Zr&&e!==ct&&e!==at}function vt(e){return!Ee(e)&&e!==Fe}function ge(e,n){var i=e.charCodeAt(n),r;return i>=55296&&i<=56319&&n+1<e.length&&(r=e.charCodeAt(n+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function $n(e){var n=/^\n* /;return n.test(e)}var Kn=1,We=2,Un=3,Wn=4,ue=5;function yt(e,n,i,r,t,s,o,c){var a,d=0,h=null,p=!1,v=!1,g=r!==-1,C=-1,b=wt(ge(e,0))&&vt(ge(e,e.length-1));if(n||o)for(a=0;a<e.length;d>=65536?a+=2:a++){if(d=ge(e,a),!ye(d))return ue;b=b&&fn(d,h,c),h=d}else{for(a=0;a<e.length;d>=65536?a+=2:a++){if(d=ge(e,a),d===we)p=!0,g&&(v=v||a-C-1>r&&e[C+1]!==" ",C=a);else if(!ye(d))return ue;b=b&&fn(d,h,c),h=d}v=v||g&&a-C-1>r&&e[C+1]!==" "}return!p&&!v?b&&!o&&!t(e)?Kn:s===ve?ue:We:i>9&&$n(e)?ue:o?s===ve?ue:We:v?Wn:Un}function Ct(e,n,i,r,t){e.dump=(function(){if(n.length===0)return e.quotingType===ve?'""':"''";if(!e.noCompatMode&&(ut.indexOf(n)!==-1||dt.test(n)))return e.quotingType===ve?'"'+n+'"':"'"+n+"'";var s=e.indent*Math.max(1,i),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),c=r||e.flowLevel>-1&&i>=e.flowLevel;function a(d){return ht(e,d)}switch(yt(n,c,e.indent,o,a,e.quotingType,e.forceQuotes&&!r,t)){case Kn:return n;case We:return"'"+n.replace(/'/g,"''")+"'";case Un:return"|"+pn(n,e.indent)+mn(un(n,s));case Wn:return">"+pn(n,e.indent)+mn(un(kt(n,o),s));case ue:return'"'+xt(n)+'"';default:throw new W("impossible error: invalid scalar style")}})()}function pn(e,n){var i=$n(e)?String(n):"",r=e[e.length-1]===`
`,t=r&&(e[e.length-2]===`
`||e===`
`),s=t?"+":r?"":"-";return i+s+`
`}function mn(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function kt(e,n){for(var i=/(\n+)([^\n]*)/g,r=(function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,i.lastIndex=d,gn(e.slice(0,d),n)})(),t=e[0]===`
`||e[0]===" ",s,o;o=i.exec(e);){var c=o[1],a=o[2];s=a[0]===" ",r+=c+(!t&&!s&&a!==""?`
`:"")+gn(a,n),t=s}return r}function gn(e,n){if(e===""||e[0]===" ")return e;for(var i=/ [^ ]/g,r,t=0,s,o=0,c=0,a="";r=i.exec(e);)c=r.index,c-t>n&&(s=o>t?o:c,a+=`
`+e.slice(t,s),t=s+1),o=c;return a+=`
`,e.length-t>n&&o>t?a+=e.slice(t,o)+`
`+e.slice(o+1):a+=e.slice(t),a.slice(1)}function xt(e){for(var n="",i=0,r,t=0;t<e.length;i>=65536?t+=2:t++)i=ge(e,t),r=K[i],!r&&ye(i)?(n+=e[t],i>=65536&&(n+=e[t+1])):n+=r||pt(i);return n}function bt(e,n,i){var r="",t=e.tag,s,o,c;for(s=0,o=i.length;s<o;s+=1)c=i[s],e.replacer&&(c=e.replacer.call(i,String(s),c)),(G(e,n,c,!1,!1)||typeof c>"u"&&G(e,n,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=t,e.dump="["+r+"]"}function hn(e,n,i,r){var t="",s=e.tag,o,c,a;for(o=0,c=i.length;o<c;o+=1)a=i[o],e.replacer&&(a=e.replacer.call(i,String(o),a)),(G(e,n+1,a,!0,!0,!1,!0)||typeof a>"u"&&G(e,n+1,null,!0,!0,!1,!0))&&((!r||t!=="")&&(t+=Ue(e,n)),e.dump&&we===e.dump.charCodeAt(0)?t+="-":t+="- ",t+=e.dump);e.tag=s,e.dump=t||"[]"}function St(e,n,i){var r="",t=e.tag,s=Object.keys(i),o,c,a,d,h;for(o=0,c=s.length;o<c;o+=1)h="",r!==""&&(h+=", "),e.condenseFlow&&(h+='"'),a=s[o],d=i[a],e.replacer&&(d=e.replacer.call(i,a,d)),G(e,n,a,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),G(e,n,d,!1,!1)&&(h+=e.dump,r+=h));e.tag=t,e.dump="{"+r+"}"}function It(e,n,i,r){var t="",s=e.tag,o=Object.keys(i),c,a,d,h,p,v;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new W("sortKeys must be a boolean or a function");for(c=0,a=o.length;c<a;c+=1)v="",(!r||t!=="")&&(v+=Ue(e,n)),d=o[c],h=i[d],e.replacer&&(h=e.replacer.call(i,d,h)),G(e,n+1,d,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&we===e.dump.charCodeAt(0)?v+="?":v+="? "),v+=e.dump,p&&(v+=Ue(e,n)),G(e,n+1,h,!0,p)&&(e.dump&&we===e.dump.charCodeAt(0)?v+=":":v+=": ",v+=e.dump,t+=v));e.tag=s,e.dump=t||"{}"}function wn(e,n,i){var r,t,s,o,c,a;for(t=i?e.explicitTypes:e.implicitTypes,s=0,o=t.length;s<o;s+=1)if(c=t[s],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof n=="object"&&n instanceof c.instanceOf)&&(!c.predicate||c.predicate(n))){if(i?c.multi&&c.representName?e.tag=c.representName(n):e.tag=c.tag:e.tag="?",c.represent){if(a=e.styleMap[c.tag]||c.defaultStyle,Dn.call(c.represent)==="[object Function]")r=c.represent(n,a);else if(_n.call(c.represent,a))r=c.represent[a](n,a);else throw new W("!<"+c.tag+'> tag resolver accepts not "'+a+'" style');e.dump=r}return!0}return!1}function G(e,n,i,r,t,s,o){e.tag=null,e.dump=i,wn(e,i,!1)||wn(e,i,!0);var c=Dn.call(e.dump),a=r,d;r&&(r=e.flowLevel<0||e.flowLevel>n);var h=c==="[object Object]"||c==="[object Array]",p,v;if(h&&(p=e.duplicates.indexOf(i),v=p!==-1),(e.tag!==null&&e.tag!=="?"||v||e.indent!==2&&n>0)&&(t=!1),v&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(h&&v&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),c==="[object Object]")r&&Object.keys(e.dump).length!==0?(It(e,n,e.dump,t),v&&(e.dump="&ref_"+p+e.dump)):(St(e,n,e.dump),v&&(e.dump="&ref_"+p+" "+e.dump));else if(c==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!o&&n>0?hn(e,n-1,e.dump,t):hn(e,n,e.dump,t),v&&(e.dump="&ref_"+p+e.dump)):(bt(e,n,e.dump),v&&(e.dump="&ref_"+p+" "+e.dump));else if(c==="[object String]")e.tag!=="?"&&Ct(e,e.dump,n,s,a);else{if(c==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new W("unacceptable kind of an object to dump "+c)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function At(e,n){var i=[],r=[],t,s;for(Be(e,i,r),t=0,s=r.length;t<s;t+=1)n.duplicates.push(i[r[t]]);n.usedDuplicates=new Array(s)}function Be(e,n,i){var r,t,s;if(e!==null&&typeof e=="object")if(t=n.indexOf(e),t!==-1)i.indexOf(t)===-1&&i.push(t);else if(n.push(e),Array.isArray(e))for(t=0,s=e.length;t<s;t+=1)Be(e[t],n,i);else for(r=Object.keys(e),t=0,s=r.length;t<s;t+=1)Be(e[r[t]],n,i)}function Ot(e,n){n=n||{};var i=new gt(n);i.noRefs||At(e,i);var r=e;return i.replacer&&(r=i.replacer.call({"":r},"",r)),G(i,0,r,!0,!0)?i.dump+`
`:""}var Ft=Ot,Et={dump:Ft};function qe(e,n){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var Pe=Pn.load,Kt=Pn.loadAll,Ut=Et.dump;var Wt=qe("safeLoad","load"),Bt=qe("safeLoadAll","loadAll"),Qt=qe("safeDump","dump");var qn=Me(require("os")),Gn=Me(require("path")),Tt=(0,Vn.promisify)(Yn.execFile),ie=class e extends u.TreeItem{constructor(i,r){super(i.label,i.collapsibleState??(i.children&&i.children.length>0?u.TreeItemCollapsibleState.Collapsed:u.TreeItemCollapsibleState.None));this.extensionUri=r;this.description=i.description,this.tooltip=i.tooltip,this.contextValue=i.contextValue??i.itemKind,this.iconPath=i.iconPath,this.workspaceFolder=i.workspaceFolder,this.data=i.data,this.itemKind=i.itemKind,this.children=(i.children??[]).map(t=>new e(t,this.extensionUri)),i.command&&(this.command={command:i.command.id,title:i.command.title??ne(i.label),arguments:[this]})}children;workspaceFolder;data;itemKind},ce=class{constructor(n,i,r){this.kind=n;this.service=i;this.extensionUri=r}_onDidChangeTreeData=new u.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(n){return n}async getChildren(n){if(n)return n.children;let i=await this.service.getProjectFolders();if(i.length===0)return[new ie({label:"No CumulusCI project found in workspace",description:"Open a folder containing cumulusci.yml",contextValue:"cumulusci.message",itemKind:"message"},this.extensionUri)];try{let r=[];for(let t of i){let s=await this.loadItemsForFolder(t);if(i.length===1){r.push(...s);continue}r.push({label:t.name,collapsibleState:u.TreeItemCollapsibleState.Expanded,contextValue:"cumulusci.folder",itemKind:"folder",children:s,workspaceFolder:t})}return r.length===0?[new ie({label:this.emptyStateLabel(),contextValue:"cumulusci.message",itemKind:"message"},this.extensionUri)]:r.map(t=>new ie(t,this.extensionUri))}catch(r){let t=r instanceof Error?r.message:String(r);return[new ie({label:`Failed to load ${this.kind}`,description:t,tooltip:t,contextValue:"cumulusci.error",itemKind:"error"},this.extensionUri)]}}emptyStateLabel(){return this.kind==="orgs"?"No orgs found in CCI project":this.kind==="tasks"?"No tasks defined in CCI project":this.kind==="flows"?"No flows defined in CCI project":"Project info unavailable"}loadItemsForFolder(n){return this.kind==="orgs"?this.service.listOrgs(n):this.kind==="tasks"?this.service.listTasks(n):this.kind==="flows"?this.service.listFlows(n):this.kind==="services"?this.service.listServices(n):this.service.listProjectInfo(n)}},Xe=class{constructor(n,i){this.extensionUri=n;this.output=i;this.icons={scratchActive:this.icon("media","images","green-circle-small.svg"),scratchInactive:this.icon("media","images","green-circle-dashed.svg"),connected:this.icon("media","images","connected-blue.svg"),orgDefault:this.icon("media","images","grey-ring.svg"),flow:{light:this.icon("resources","light","flow.svg"),dark:this.icon("resources","dark","flow.svg")},refresh:{light:this.icon("resources","light","refresh.svg"),dark:this.icon("resources","dark","refresh.svg")},run:{light:this.icon("resources","light","run.svg"),dark:this.icon("resources","dark","run.svg")}}}configCandidates=["cumulusci.yml","cumulusci.yaml"];orgLabelKeys=["alias","name","org_name","config_name","key"];orgDescriptionKeys=["username","instance_url","status"];taskLabelKeys=["name","task_name"];taskDescriptionKeys=["description","group"];flowLabelKeys=["name","flow"];flowDescriptionKeys=["description","group"];groupKeys=["group","category","type"];icons;async getProjectFolders(){let n=u.workspace.workspaceFolders??[],i=[];for(let r of n)await this.hasCciConfig(r)&&i.push(r);return i}async listOrgs(n){return(await this.getOrgEntries(n)).map(r=>this.orgEntryToTreeItem(n,r))}async findDefaultOrg(){let n=await this.getProjectFolders();for(let i of n){let t=(await this.getOrgEntries(i)).find(s=>R(s.data,["is_default","default","isDefault"])===!0);if(t)return{folder:i,entry:t}}}async listTasks(n){let{records:i}=await this.fetchRecords(n,["task","list"],"tasks");return i=await this.includeConfigDefinitions(i,n,"tasks"),this.buildGroupedItems(n,i,{labelKeys:this.taskLabelKeys,descriptionKeys:this.taskDescriptionKeys,itemKind:"task",contextValue:"cumulusci.task",command:{id:"cumulusci.runTask",title:"Run Task"},iconPath:new u.ThemeIcon("tools")})}async listFlows(n){let{records:i}=await this.fetchRecords(n,["flow","list"],"flows");return i=await this.includeConfigDefinitions(i,n,"flows"),this.buildGroupedItems(n,i,{labelKeys:this.flowLabelKeys,descriptionKeys:this.flowDescriptionKeys,itemKind:"flow",contextValue:"cumulusci.flow",command:{id:"cumulusci.runFlow",title:"Run Flow"},iconPath:this.icons.flow})}async listServices(n){let i=await this.getServiceTypeGroups(n);return i.length===0?[{label:"No services reported by CCI",description:"Run cci service connect to add one",contextValue:"cumulusci.message",itemKind:"message"}]:i.map(r=>{let t=r.description?r.description:void 0,s=[];for(let o of r.entries)s.push({label:o.name,description:o.isDefault?"Default":void 0,tooltip:o.description,contextValue:o.isDefault?"cumulusci.service.default":"cumulusci.service",itemKind:"service",iconPath:o.isDefault?new u.ThemeIcon("star-full"):new u.ThemeIcon("key"),data:{type:r.type,typeLabel:r.label,name:o.name,description:o.description,isDefault:o.isDefault,attributes:r.attributes},workspaceFolder:n,command:{id:"cumulusci.service.showInfo",title:"Show Service Info"}});return s.length===0&&s.push({label:"No service connected",description:'Run "cci service connect" to configure',contextValue:"cumulusci.message",itemKind:"message",workspaceFolder:n}),{label:r.label,description:s.some(o=>o.itemKind==="service")?void 0:"Not configured",tooltip:t,contextValue:"cumulusci.serviceType",itemKind:"serviceType",iconPath:new u.ThemeIcon("plug"),children:s,workspaceFolder:n,data:{type:r.type,label:r.label,description:r.description,attributes:r.attributes}}})}async getServiceTypeGroups(n){let i=await this.runCciCommand(n,["service","list","--plain"]),r=this.parseServiceListOutput(i);if(r.length===0)return[];let t=await this.fetchServiceTypeMetadata(n);return this.groupServiceRows(r,t)}async listProjectInfo(n){let i=await this.runCciCommand(n,["project","info"]),r=this.parseProjectInfoOutput(i),t=this.stripAnsiSequences(i).trim();if(!r)return t?[{label:"Unable to parse project info output",description:"See tooltip for raw content",tooltip:t,itemKind:"error",contextValue:"cumulusci.error"}]:[];let s=this.buildProjectInfoItems(r);return s.length===0?[]:s}async getOrgQuickPickItems(n){return(await this.getOrgEntries(n)).filter(r=>!r.definitionMissing).map(r=>({label:r.alias,description:r.description,detail:this.describeOrgEntry(r),alias:r.alias,data:r.data,orgCreated:r.orgCreated,expired:r.expired,isScratch:r.isScratch,definitionOnly:r.definitionOnly,definitionMissing:r.definitionMissing})).sort((r,t)=>r.label.localeCompare(t.label))}async runCciCommand(n,i){let r=["cci",...i.map(Re)].join(" "),t=this.describeWorkspace(n);this.output.appendLine(`${t}$ ${r}`);let s=Date.now();try{let{stdout:o}=await Tt("cci",i,{cwd:n.uri.fsPath,env:{...process.env,CUMULUSCI_DISABLE_GIST_LOGGER:"1"}});return this.logCommandResult(t,o,Date.now()-s),o}catch(o){if(o.code==="ENOENT"){let d=`CumulusCI CLI (cci) not found. To use this extension, first install the CumulusCI CLI.

Install CumulusCI CLI by following the instructions at https://cumulusci.readthedocs.io/en/latest/install.html and ensure that the "cci" command is available in your system PATH.`;throw this.output.appendLine(`${t}! ${d}`),new Error(d)}let c=o.stderr??o.message,a=this.stripAnsiSequences(c??"").trim();throw a.length>0&&this.output.appendLine(`${t}! ${a}`),new Error(a||"Unknown CCI CLI error")}}async getOrgInfo(n,i){let r=await this.runCciCommand(n,["org","info",i,"--json"]),t=this.parseJsonObject(r);if(!t)throw new Error("Failed to parse CCI org info output as JSON.");return t}async getServiceInfo(n,i,r){let t=["service","info"];t.push(i),r&&r.trim().length>0&&t.push(r.trim());let s=await this.runCciCommand(n,t);return this.parseServiceInfoOutput(s)}parseServiceListOutput(n){let i=this.stripAnsiSequences(n);if(!i.trim())return[];let t=i.split(/\r?\n/),s=t.findIndex(b=>b.includes("Default")&&b.includes("Type")&&b.includes("Name")&&b.includes("Description"));if(s===-1)return[];let o=t[s],c=o.indexOf("Default"),a=o.indexOf("Type",Math.max(c,0)),d=o.indexOf("Name",Math.max(a,0)),h=o.indexOf("Description",Math.max(d,0));if(a<0||d<0||h<0)return[];let p=t.findIndex((b,A)=>A>s&&/[\u2500\-]{3,}/.test(b.replace(/\s+/g,""))),v=p>=0?p+1:s+1,g=[],C;for(let b=v;b<t.length;b+=1){let A=t[b];if(!A)continue;let D=A.trim();if(!D||/^[\u2500\-]{3,}$/.test(D.replace(/\s+/g,"")))continue;let F=A.slice(0,a).trim(),z=A.slice(a,d).trim(),le=A.slice(d,h).trim(),q=h<A.length?A.slice(h).trim():"";if(!F&&!z&&!le&&q.length>0&&C){C.description=this.appendWrappedText(C.description,q);continue}if(!z&&!le&&!F)continue;let L={type:z,name:le||void 0,isDefault:F.includes("\u2714"),description:q};g.push(L),C=L}return g.map(b=>({...b,type:b.type.trim(),description:this.normalizeServiceDescription(b.description)}))}async fetchServiceTypeMetadata(n){try{let i=await this.runCciCommand(n,["service","list","--json"]),r=this.parseJsonObject(i);if(!r)return new Map;let t=new Map;for(let[s,o]of Object.entries(r)){let c=ee(o);if(!c)continue;let a=ee(c.attributes),d=[];if(a){for(let[p,v]of Object.entries(a)){let g=ee(v);if(!g)continue;let C=E(g,["description"]),b=R(g,["required"])??!1,A=R(g,["sensitive"])??!1,D=E(g,["default"]),F=E(g,["default_factory"]);d.push({name:p,description:C,required:b,sensitive:A,defaultValue:D,defaultFactory:F})}d.sort((p,v)=>p.name.localeCompare(v.name))}let h=E(c,["description"])??"";t.set(s,{description:h,attributes:d})}return t}catch(i){return this.didFailDueToJsonFlag(i)?new Map:new Map}}groupServiceRows(n,i){let r=new Map;for(let s of n){let o=s.type.trim();if(!o)continue;let c=r.get(o);c||(c={description:"",entries:[]},r.set(o,c));let a=this.normalizeServiceDescription(s.description);a&&c.description.length===0&&(c.description=a),s.name&&c.entries.push({name:s.name,description:a,isDefault:s.isDefault})}let t=[];for(let[s,o]of r.entries()){let c=o.entries.slice().sort((h,p)=>h.isDefault!==p.isDefault?h.isDefault?-1:1:h.name.localeCompare(p.name)),a=i.get(s),d=o.description||a?.description||"";t.push({type:s,label:xe(s),description:d,entries:c,attributes:a?.attributes??[]})}return t.sort((s,o)=>s.label.localeCompare(o.label)),t}parseServiceInfoOutput(n){let r=this.stripAnsiSequences(n).split(/\r?\n/),t={entries:[]},s=r.findIndex(g=>g.includes("Key")&&g.includes("Value"));if(s===-1){let g=r.map(C=>C.trim()).find(C=>C.length>0);return g&&(t.title=this.normalizeServiceDescription(g)),t}for(let g=0;g<s;g+=1){let C=r[g]?.trim();C&&!/^[\u2500\-]{3,}$/.test(C.replace(/\s+/g,""))&&(t.title=this.normalizeServiceDescription(C))}let o=r[s],c=o.indexOf("Key"),a=o.indexOf("Value",Math.max(c,0));if(c<0||a<0)return t;let d=r.findIndex((g,C)=>C>s&&/[\u2500\-]{3,}/.test(g.replace(/\s+/g,""))),h=d>=0?d+1:s+1,p,v=[];for(let g=h;g<r.length;g+=1){let C=r[g];if(!C)continue;let b=C.trim();if(!b||/^[\u2500\-]{3,}$/.test(b.replace(/\s+/g,"")))continue;let A=C.slice(c,a).trim(),D=a<C.length?C.slice(a).trim():"";if(A){p={key:A,value:this.normalizeServiceDescription(D)},v.push(p);continue}p&&D&&(p.value=this.appendWrappedText(p.value,D))}return t.entries=v.map(g=>({key:g.key,value:this.normalizeServiceDescription(g.value)})),t}appendWrappedText(n,i){let r=this.normalizeServiceDescription(n),t=this.normalizeServiceDescription(i);return r?t?`${r} ${t}`.trim():r:t}normalizeServiceDescription(n){return n?n.replace(/\s+/g," ").trim():""}parseProjectInfoOutput(n){let r=this.stripAnsiSequences(n).trim();if(!r)return;let t=new Set;t.add(r);let s=r.split(/\r?\n/),o=s.findIndex(a=>a.trim().toLowerCase().startsWith("name:"));if(o>0){let a=s.slice(o).join(`
`).trim();a.length>0&&t.add(a)}let c=s.findIndex(a=>/^[A-Za-z0-9_-]+\s*:\s*/.test(a.trim()));if(c>0){let a=s.slice(c).join(`
`).trim();a.length>0&&t.add(a)}for(let a of t){let d=this.tryParseProjectInfo(a);if(d)return d;let h=this.normalizeProjectInfoYaml(a);if(h!==a){let p=this.tryParseProjectInfo(h);if(p)return p}}}buildProjectInfoItems(n){let i=Object.entries(n);return i.sort((r,t)=>r[0]==="name"?-1:t[0]==="name"?1:r[0].localeCompare(t[0])),i.map(([r,t])=>this.buildProjectInfoItem(r,t))}buildProjectInfoItem(n,i,r={}){let t=r.parentIsArray?"cumulusci.project.arrayItem":"cumulusci.project.field";if(this.isPlainObject(i)){let s=Object.entries(i);if(s.length===0)return this.buildProjectLeafItem(n,"(empty object)",t,i);s.sort((c,a)=>c[0].localeCompare(a[0]));let o=s.map(([c,a])=>this.buildProjectInfoItem(c,a));return{label:n,itemKind:"group",contextValue:`${t}.group`,collapsibleState:u.TreeItemCollapsibleState.Collapsed,iconPath:new u.ThemeIcon("symbol-structure"),children:o,data:{key:n,value:i}}}if(Array.isArray(i)){if(i.length===0)return this.buildProjectLeafItem(n,"(empty list)",t,i);let s=i.map((o,c)=>this.buildProjectInfoItem(`Item ${c+1}`,o,{parentIsArray:!0}));return{label:n,description:`${i.length} item${i.length===1?"":"s"}`,itemKind:"group",contextValue:`${t}.array`,collapsibleState:u.TreeItemCollapsibleState.Collapsed,iconPath:new u.ThemeIcon("list-unordered"),children:s,data:{key:n,value:i}}}return this.buildProjectLeafItem(n,i,t,i)}buildProjectLeafItem(n,i,r,t){let{display:s,tooltip:o}=this.formatProjectScalarValue(i),c=`${n}: ${s}`;return{label:c,tooltip:o?`${n}: ${o}`:c,itemKind:"message",contextValue:`${r}.leaf`,iconPath:new u.ThemeIcon("symbol-string"),data:{key:n,value:t}}}tryParseProjectInfo(n){try{let i=Pe(n);if(i&&typeof i=="object"&&!Array.isArray(i))return i}catch{}}normalizeProjectInfoYaml(n){return n.split(/\r?\n/).map(t=>{let s=t.match(/^(\s*[^:#\n]+?):\s*(.*)$/);if(!s)return t;let[,o,c]=s;if(c.length===0)return t;let a=c.trim();if(a.length===0)return`${o}: ''`;if(/^[>|-]/.test(a)||/^["']/.test(a)||a.endsWith(":")&&!a.includes(" ")||/^\d+\s*:$/.test(a)||!(/[:#%]/.test(a)||/^https?:/i.test(a)))return t;let h=a.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return`${o}: "${h}"`}).join(`
`)}formatProjectScalarValue(n){if(n===null)return{display:"null",tooltip:"null"};if(n===void 0)return{display:"\u2013",tooltip:"No value set"};if(typeof n=="string"){let i=n.trim();return i.length===0?{display:"\u2013",tooltip:"Empty string"}:{display:i.replace(/\r?\n/g," \u23CE "),tooltip:i}}if(typeof n=="number"||typeof n=="boolean"){let i=String(n);return{display:i,tooltip:i}}return{display:JSON.stringify(n),tooltip:JSON.stringify(n,null,2)}}stripAnsiSequences(n){return n.replace(/\u001b\[[0-9;?]*[A-Za-z]/g,"")}describeWorkspace(n){return`[${n.name||n.uri.fsPath}]`}logCommandResult(n,i,r){let t=this.stripAnsiSequences(i).trim();if(t.length>0){let o=t.split(/\r?\n/),c=20;for(let a of o.slice(0,c))this.output.appendLine(`${n}> ${a}`);o.length>c&&this.output.appendLine(`${n}> \u2026 (${o.length-c} more lines)`)}let s=Math.max(r/1e3,0).toFixed(1);this.output.appendLine(`${n}\u2713 Completed in ${s}s`)}isPlainObject(n){return!!n&&typeof n=="object"&&!Array.isArray(n)}async findCciConfigUri(n){for(let i of this.configCandidates){let r=u.Uri.joinPath(n.uri,...i.split("/"));try{return await(0,ze.access)(r.fsPath,Je.constants.R_OK),r}catch{}}}async getOrgDefinitions(n){let i=new Map;for(let r of await this.collectOrgsDirectoryDefinitions(n))this.mergeOrgDefinition(i,r);for(let r of await this.collectConfigScratchDefinitions(n))this.mergeOrgDefinition(i,r);return i}mergeOrgDefinition(n,i){let r=Ge(i.alias),t=n.get(r);if(t){!t.configPath&&i.configPath&&(t.configPath=i.configPath),t.isScratch=t.isScratch??i.isScratch,i.sources.forEach(s=>t.sources.add(s));return}n.set(r,{alias:se(i.alias),configPath:i.configPath,isScratch:i.isScratch,sources:new Set(i.sources)})}async collectOrgsDirectoryDefinitions(n){let i=[],r=u.Uri.joinPath(n.uri,"orgs");try{let t=await u.workspace.fs.readDirectory(r);for(let[s,o]of t){if(o!==u.FileType.File)continue;let c=s.match(/^(.*)\.(ya?ml|json)$/i);if(!c)continue;let a=se(c[1]);if(!a)continue;let d=`orgs/${s}`;i.push({alias:a,configPath:d,isScratch:!0,sources:new Set([d])})}}catch{}return i}async collectConfigScratchDefinitions(n){let i=[],r=await this.findCciConfigUri(n);if(!r)return i;try{let t=await u.workspace.fs.readFile(r),s=Buffer.from(t).toString("utf8"),o=Pe(s);if(!o||typeof o!="object")return i;let c=o.orgs;if(!c||typeof c!="object")return i;let a=c.scratch;if(!a)return i;let d=r.path.split("/").pop()??"cumulusci.yml",h=u.workspace.asRelativePath(r,!1)||d,p=(v,g)=>{let C=se(v);if(!C)return;let b=new Set([h]),A;if(typeof g=="string")A=g;else if(g&&typeof g=="object"){let F=g.config_file;typeof F=="string"&&F.trim().length>0&&(A=F.trim())}A&&b.add(A),i.push({alias:C,configPath:A,isScratch:!0,sources:b})};if(Array.isArray(a)){for(let v of a)if(typeof v=="string")p(v,void 0);else if(v&&typeof v=="object")for(let[g,C]of Object.entries(v))p(g,C)}else if(typeof a=="object")for(let[v,g]of Object.entries(a))p(v,g)}catch{}return i}icon(...n){return u.Uri.joinPath(this.extensionUri,...n)}async hasCciConfig(n){return await this.findCciConfigUri(n)!==void 0}async fetchRecords(n,i,r){try{let s=await this.runCciCommand(n,[...i,"--json"]),o=this.parseJsonRecords(s,r);if(o.length>0)return{records:o,format:"json"}}catch(s){if(!this.didFailDueToJsonFlag(s))throw s}let t=await this.runCciCommand(n,i);return{records:this.parseTextRecords(t),format:"text"}}async includeConfigDefinitions(n,i,r){let t=r==="tasks"?this.taskLabelKeys:this.flowLabelKeys,s=await this.loadConfigDefinitionsMap(i,r),o=[];for(let c of n){let a=this.normalizeRecord(c,t),d=a?E(a,t):void 0;if(d){let h=d.toLowerCase(),p=s.get(h);p&&a&&(this.mergeConfigDefinition(a,p),s.delete(h))}a&&o.push(a)}for(let c of s.values())o.push({...c});return o}async loadProjectConfigSection(n,i){let r=await this.findCciConfigUri(n);return r?this.loadConfigSectionFromSource(r,i,"project"):[]}async loadGlobalConfigSection(n){let i=Gn.join(qn.homedir(),".cumulusci","cumulusci.yml");try{await(0,ze.access)(i,Je.constants.R_OK)}catch{return[]}let r=u.Uri.file(i);return this.loadConfigSectionFromSource(r,n,"global")}async loadConfigSectionFromSource(n,i,r){try{let t=await u.workspace.fs.readFile(n),s=Buffer.from(t).toString("utf8"),o=Pe(s);if(!o||typeof o!="object"||Array.isArray(o))return[];let c=o[i];return this.convertConfigSectionToRecords(c,r)}catch{return[]}}convertConfigSectionToRecords(n,i){if(!n||typeof n!="object"||Array.isArray(n))return[];let r=[];for(let[t,s]of Object.entries(n)){let o={name:t,configSource:i};if(typeof s=="string")o.description=s;else if(s&&typeof s=="object"){let c=s;typeof c.description=="string"&&(o.description=c.description),typeof c.group=="string"&&(o.group=c.group),o.configDefinition=c}o.group===void 0&&(o.group=i==="global"?"Workspace Config":"Project Config"),r.push(o)}return r}async loadConfigDefinitionsMap(n,i){let r=[...await this.loadProjectConfigSection(n,i),...await this.loadGlobalConfigSection(i)],t=new Map;for(let s of r){let o=typeof s.name=="string"?s.name.trim():void 0;o&&t.set(o.toLowerCase(),s)}return t}normalizeRecord(n,i){let r=ee(n);if(r)return{...r};if(typeof n=="string"){let t=n.trim();return t.length===0?void 0:{name:t}}}mergeConfigDefinition(n,i){n.configSource=i.configSource??n.configSource,i.configDefinition&&(n.configDefinition=i.configDefinition),i.group&&(!n.group||n.group==="Ungrouped")&&(n.group=i.group),i.description&&!n.description&&(n.description=i.description)}extractNameFromRecord(n,i){let r=ee(n);if(r){let t=E(r,i);if(t)return t}if(typeof n=="string"){let t=n.trim();if(t.length>0)return t}}parseJsonRecords(n,i){let r=n.trim();if(!r)return[];let t=[r],s=r.indexOf("{"),o=r.indexOf("["),c=[s,o].filter(a=>a>=0).sort((a,d)=>a-d);for(let a of c){let d=r.slice(a).trim();d.length>0&&t.push(d)}for(let a of t)try{let d=JSON.parse(a);return this.normalizeJsonRecords(d,i)}catch{}return[]}parseJsonObject(n){let i=n.trim();if(!i)return;let r=[i],t=i.indexOf("{");t>0&&r.push(i.slice(t).trim());for(let s of r)try{let o=JSON.parse(s),c=ee(o);if(c)return c}catch{}}parseTextRecords(n){return n.split(/\r?\n/).map(i=>i.trim()).filter(i=>i.length>0&&!/^[-=]+$/.test(i)&&!/^Name\s+/i.test(i))}normalizeJsonRecords(n,i){if(Array.isArray(n))return n;if(n&&typeof n=="object"){let r=n,t=r[i];if(Array.isArray(t))return t;if(t&&typeof t=="object"&&!Array.isArray(t))return this.mapEntriesToRecords(t);for(let s of Object.values(r))if(Array.isArray(s))return s;return this.isAliasRecordMap(r)?this.mapEntriesToRecords(r):[r]}return[]}isAliasRecordMap(n){let i=Object.values(n);return i.length===0?!1:i.every(r=>r&&typeof r=="object"&&!Array.isArray(r))}mapEntriesToRecords(n){return Object.entries(n).map(([i,r])=>{if(r&&typeof r=="object"&&!Array.isArray(r)){let t={...r},s=typeof t.alias=="string"?t.alias.trim():"",o=s.length>0?s:i;t.alias=o,(typeof t.name!="string"||t.name.trim().length===0)&&(t.name=o);let c=typeof t.config=="string"&&t.config.trim().length>0?t.config.trim():void 0;return t.config_name===void 0&&(t.config_name=c??o),t.key===void 0&&(t.key=o),t.orgCreated===void 0&&typeof t.expired=="boolean"&&(t.orgCreated=!t.expired),t}return{alias:i,value:r}})}didFailDueToJsonFlag(n){let i=n instanceof Error?n.message:String(n);return/--json/i.test(i)||/no such option/i.test(i)}async getOrgEntries(n){let{records:i}=await this.fetchRecords(n,["org","list"],"orgs"),r=await this.getOrgDefinitions(n),t=new Map;for(let o of i){let c=ee(o),a;if(c)a={...c};else if(typeof o=="string"&&o.trim().length>0){let C=se(o.trim());if(C.length===0)continue;a={alias:C,name:C}}if(!a)continue;let d=E(a,this.orgLabelKeys);if(!d&&typeof a.alias=="string"&&(d=a.alias),!d&&typeof a.name=="string"&&(d=a.name),!d)continue;let h=se(d);a.alias=h,(typeof a.name!="string"||a.name.trim().length===0)&&(a.name=h),a.config_name===void 0&&(a.config_name=typeof a.config=="string"?a.config:h);let p=Ge(h),v=r.get(p),g=new Set(Bn(a.definitionSources));v?(!a.config&&v.configPath&&(a.config=v.configPath),v.isScratch!==void 0&&(a.is_scratch=v.isScratch),v.sources.forEach(C=>g.add(C)),r.delete(p)):a.is_scratch===!0&&(a.definitionMissing=!0),a.definitionOnly=!1,g.size>0?a.definitionSources=Array.from(g):delete a.definitionSources,t.set(p,a)}for(let o of r.values()){let c=se(o.alias);if(!c)continue;let a=Ge(c);if(t.has(a))continue;let d=Array.from(o.sources),h={alias:c,name:c,config:o.configPath,config_name:o.configPath??c,is_scratch:o.isScratch??!0,orgCreated:!1,expired:!1,definitionOnly:!0};d.length>0&&(h.definitionSources=d),t.set(a,h)}let s=[];for(let o of t.values()){let c=this.createOrgEntry(o);c&&s.push(c)}return s.sort((o,c)=>o.alias.localeCompare(c.alias)),s}createOrgEntry(n){let i={...n},r=E(i,this.orgLabelKeys)??E(i,Object.keys(i));if(!r)return;i.alias=r,(typeof i.name!="string"||i.name.trim().length===0)&&(i.name=r);let t=E(i,["config","config_name"]);i.config_name===void 0&&(i.config_name=t??r);let s=R(i,["is_default","default","isDefault"])??!1,o=R(i,["scratch","scratch_org","is_scratch","isScratch"])??!1,c=R(i,["expired"])??!1,a=R(i,["orgCreated","active","is_active"]),d=E(i,["days"]),h=E(i,["domain","instance_url","login_url"]),p=Bn(i.definitionSources),v=typeof i.definitionOnly=="boolean"?i.definitionOnly:!1,g=R(i,["definitionMissing"])??!1,C=typeof h=="string"&&h.length>0,b;g||v?b=!1:o?b=a??(C&&!c):b=a??C,C||(b=!1),i.orgCreated=b,i.expired=c,i.definitionOnly=v,p.length>0&&(i.definitionSources=p),g&&(i.definitionMissing=!0);let A=this.buildOrgDescription({isScratch:o,expired:c,isDefault:s,dayCount:d,orgCreated:b,definitionOnly:v,definitionMissing:g}),D=this.createOrgTooltip({alias:r,configName:t,isDefault:s,isScratch:o,expired:c,dayCount:d,domain:h,data:i,orgCreated:b,definitionSources:p,definitionOnly:v,definitionMissing:g}),F=g?"cumulusci.org.disabled":"cumulusci.org",z=g?void 0:{id:"cumulusci.org.showActions",title:"Org Actions"};return{alias:r,data:i,description:A,tooltip:D,contextValue:F,iconPath:this.getOrgIcon(i),command:z,isScratch:o,orgCreated:b,expired:c,definitionOnly:v,definitionMissing:g}}orgEntryToTreeItem(n,i){return{label:i.alias,description:i.description,tooltip:i.tooltip,contextValue:i.contextValue,itemKind:"org",workspaceFolder:n,data:i.data,iconPath:i.iconPath,command:i.command}}describeOrgEntry(n){let i=[];i.push(n.isScratch?"Scratch org":"Connected org"),n.definitionMissing?i.push("Missing definition"):n.definitionOnly?i.push("Definition only (will create on run)"):n.isScratch?(i.push(n.orgCreated?"Active":"Not created"),n.expired&&i.push("Expired")):i.push(n.orgCreated?"Ready":"Unavailable");let r=E(n.data,["instance_url","domain","login_url"]);return r&&i.push(r),i.join(" \u2022 ")}buildOrgDescription(n){let i=[];if(n.isScratch){if(n.definitionMissing?i.push("Scratch definition missing"):n.definitionOnly?i.push("Scratch (definition)"):n.orgCreated?i.push(n.expired?"Scratch (expired)":"Scratch"):i.push(n.expired?"Scratch (expired)":"Scratch (not created)"),n.orgCreated&&!n.expired){let r=this.formatScratchDayDisplay(n.dayCount);r&&i.push(r)}}else i.push(n.orgCreated?"Connected":"Connected (not linked)");return n.isDefault&&i.push("Default"),i.length>0?i.join(" \u2022 "):void 0}createOrgTooltip(n){let i=new u.MarkdownString;i.isTrusted=!1,i.appendMarkdown(`**${n.alias}**

`);let r=[`- Config: ${n.configName??"n/a"}`,`- Default org: ${n.isDefault?"Yes":"No"}`,`- Type: ${n.isScratch?"Scratch org":"Connected org"}`,`- Created: ${n.orgCreated?"Yes":"No"}`];if(n.isScratch){if(n.definitionMissing)r.push("- Scratch status: Definition missing");else if(n.definitionOnly)r.push("- Scratch status: Definition only");else if(r.push(`- Scratch status: ${n.expired?"Expired":n.orgCreated?"Active":"Not created"}`),n.orgCreated&&!n.expired){let t=this.formatScratchDayDisplay(n.dayCount);t&&r.push(`- ${t}`)}}return n.domain&&n.domain.trim().length>0&&r.push(`- Domain: ${n.domain}`),n.definitionMissing&&r.push("- Definition status: Missing local definition file"),n.definitionSources.length>0&&r.push(`- Defined in: ${n.definitionSources.join(", ")}`),i.appendMarkdown(r.join(`
`)),i.appendMarkdown(`
`),i.appendCodeblock(JSON.stringify(n.data,null,2),"json"),i}formatScratchDayDisplay(n){if(!n)return;let i=n.trim();if(!i)return;let{remaining:r,total:t}=zn(i);return Jn(r,t)??i}buildGroupedItems(n,i,r){let t=new Map;for(let o of i){let c=ee(o),a=c?E(c,r.labelKeys)??E(c,Object.keys(c))??"Unnamed":typeof o=="string"?o:"Unnamed",d=c?E(c,r.descriptionKeys)??void 0:void 0,h=c&&typeof c.configSource=="string"?c.configSource:void 0,v=[d,h==="project"?"Project config":h==="global"?"Workspace config":void 0].filter(D=>D&&D.length>0).join(" \u2022 "),g=c?Pt(c):void 0,C=h==="project"?new u.ThemeIcon("notebook"):h==="global"?new u.ThemeIcon("globe"):r.iconPath,b={label:a,description:v.length>0?v:void 0,tooltip:g,contextValue:r.contextValue,itemKind:r.itemKind,workspaceFolder:n,data:c,iconPath:C,command:r.command},A;if(h==="project"||h==="global")A=h==="project"?`Local ${r.itemKind}s`:`Workspace ${r.itemKind}s`;else{let D=c?E(c,this.groupKeys):void 0;A=D&&D.trim().length>0?D.trim():"Ungrouped"}t.has(A)||t.set(A,[]),t.get(A)?.push(b)}if(t.size===1&&t.has("Ungrouped"))return(t.get("Ungrouped")??[]).sort((o,c)=>o.label.localeCompare(c.label));let s=[`Local ${r.itemKind}s`,`Workspace ${r.itemKind}s`];return Array.from(t.entries()).sort(([o],[c])=>{let a=s.indexOf(o),d=s.indexOf(c);return a!==-1||d!==-1?a===-1?1:d===-1?-1:a-d:o.localeCompare(c)}).map(([o,c])=>({label:o,collapsibleState:u.TreeItemCollapsibleState.Expanded,contextValue:"cumulusci.group",itemKind:"group",children:c.sort((a,d)=>a.label.localeCompare(d.label)),workspaceFolder:n}))}getOrgIcon(n){if(R(n,["definitionMissing"])===!0)return new u.ThemeIcon("circle-slash");if(R(n,["scratch","scratch_org","is_scratch","isScratch"])??!1){let r=R(n,["expired"]),t=R(n,["orgCreated","active","is_active"]),s=R(n,["definitionMissing"]);return r===!0||t===!1?this.icons.scratchInactive:s?this.icons.scratchInactive:this.icons.scratchActive}return R(n,["connected","is_connected"])===!0?this.icons.connected:this.icons.orgDefault}};function ee(e){if(!(!e||typeof e!="object"||Array.isArray(e)))return e}function E(e,n){if(e)for(let i of n){let r=e[i];if(typeof r=="string"&&r.trim().length>0)return r.trim()}}function se(e){return e.trim()}function Ge(e){return se(e).toLowerCase()}function Bn(e){return Array.isArray(e)?e.map(n=>typeof n=="string"?n.trim():"").filter(n=>n.length>0):typeof e=="string"&&e.trim().length>0?[e.trim()]:[]}function R(e,n){if(e)for(let i of n){let r=e[i];if(typeof r=="boolean")return r;if(typeof r=="string"){let t=r.trim().toLowerCase();if(["true","yes","1"].includes(t))return!0;if(["false","no","0"].includes(t))return!1}if(typeof r=="number")return r!==0}}function Pt(e){let n=new u.MarkdownString;return n.isTrusted=!1,n.appendCodeblock(JSON.stringify(e,null,2),"json"),n}function Dt(e,n){let i=[],r=E(n,["username","user","email_address"]);r&&i.push(["Username",r]);let t=E(n,["instance_url","domain","login_url"]);t&&i.push(["Instance URL",t]);let s=E(n,["org_id","id"]);s&&i.push(["Org ID",s]);let o=E(n,["config_file","config"]);o&&i.push(["Definition File",o]);let c=E(n,["org_type"]);c&&i.push(["Org Type",c]);let a=R(n,["scratch","is_scratch"]);a!==void 0&&i.push(["Scratch Org",Qn(a)]);let d=R(n,["created","orgCreated"]);d!==void 0&&i.push(["Created",Qn(d)]);let h=Xn(n.days);h&&i.push(["Days Remaining",h]);let p=E(n,["date_created"]);p&&i.push(["Date Created",p]);let v=E(n,["sfdx_alias"]);v&&i.push(["SFDX Alias",v]);let g=E(n,["namespace"]);g&&i.push(["Namespace",g]);let C=[`# Org: ${ae(e)}`,""];if(i.length>0){C.push("## Summary","","| Field | Value |","| --- | --- |");for(let[b,A]of i)C.push(`| ${ae(b)} | ${ae(A)} |`);C.push("")}return C.push("## Raw JSON","","```json"),C.push(JSON.stringify(n,null,2)),C.push("```"),C.join(`
`)}function _t(e,n,i){let r=[e];n&&r.push(n);let t=r.join(" \u2022 "),s=[`# Service: ${ae(t)}`,""];if(i.title&&i.title!==t&&s.push(`_CCI reference:_ ${ae(i.title)}`,""),i.entries.length===0)return s.push("_No attributes reported by CCI._"),s.join(`
`);s.push("| Field | Value |","| --- | --- |");for(let o of i.entries)s.push(`| ${ae(o.key)} | ${ae(o.value)} |`);return s.join(`
`)}function ae(e){return e.replace(/[|\\`*_{}\[\]()#+\-!.]/g,n=>`\\${n}`).replace(/\n/g,"<br/>")}function Qn(e){return e?"Yes":"No"}function ke(e){return e===1?"day":"days"}function zn(e){if(!e)return{};let n=e.trim();if(!n)return{};let i=n.match(/^(\d+)\s*\/\s*(\d+)$/);if(i){let t=Number.parseInt(i[1],10),s=Number.parseInt(i[2],10);if(Number.isFinite(t)&&Number.isFinite(s)&&s>0)return{used:t,total:s,remaining:Math.max(s-t,0)}}let r=Number(n);if(Number.isFinite(r)){let t=Math.max(0,Math.floor(r));return{total:t,remaining:t}}return{}}function Jn(e,n){if(!(n===void 0&&e===void 0))return n===void 0?e===void 0?void 0:`${e} ${ke(e)} left`:n===0?"Expired":e===void 0?`${n} ${ke(n)} left`:e===n?`${e} ${ke(e)} left`:`${e}/${n} ${ke(n)} left`}function xe(e){let n=e.trim();if(!n)return"Service";let i=n.split(/[_-]+/).filter(r=>r.length>0);return i.length===0?Hn(n):i.map(Hn).join(" ")}function Hn(e){switch(e.toLowerCase()){case"oauth2":return"OAuth2";case"github":return"GitHub";case"devhub":return"Dev Hub";case"metaci":return"MetaCI";case"metadeploy":return"MetaDeploy";case"sfdx":return"SFDX";default:return e.charAt(0).toUpperCase()+e.slice(1)}}function Xn(e){if(e!=null){if(typeof e=="string"){let n=e.trim();return n.length>0?n:void 0}if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.map(n=>Xn(n)??"").filter(n=>n.length>0).join(", ");if(typeof e=="object")return JSON.stringify(e)}}function Rt(e){let n=e.split(/\r?\n/).flatMap(r=>r.split(",")).map(r=>r.trim()).filter(r=>r.length>0),i=[];for(let r of n)i.push("-o"),i.push(r);return i}function Mt(e){let n=e.trim();if(!n)return[];let i=/"([^"\\]*(?:\\.[^"\\]*)*)"|'([^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+/g,r=[],t;for(;(t=i.exec(n))!==null;){if(t[1]!==void 0){r.push(t[1].replace(/\\"/g,'"'));continue}if(t[2]!==void 0){r.push(t[2].replace(/\\'/g,"'"));continue}r.push(t[0])}return r}function Re(e){return e?/[^A-Za-z0-9_@%+=:,./-]/.test(e)?`"${e.replace(/(["\\$`])/g,"\\$1")}"`:e:'""'}function Ce(e){if(e instanceof ie)return e;if(Array.isArray(e)&&e[0]instanceof ie)return e[0]}function De(e){let n=e.workspaceFolder;if(!n)throw new Error("Workspace folder not found for this item.");return n}function _e(e,n,i){if(e.itemKind!==n)throw new Error(`${i} can only be used from a ${n} item.`)}function ne(e){return e?typeof e=="string"?e:e.label:""}function oe(e){if(typeof e=="string")return e;if(typeof e=="boolean")return e?"true":"false";if(e&&typeof e=="object")return e.label}function Lt(e){let n=u.window.createOutputChannel("CumulusCI");e.subscriptions.push(n);let i=new Xe(e.extensionUri,n),r=u.window.createStatusBarItem(u.StatusBarAlignment.Left,100);r.name="CumulusCI Default Org",r.command="cumulusci.status.showDefaultOrg",r.text="$(organization) Loading\u2026",r.tooltip="Resolving default CCI org\u2026",r.show(),e.subscriptions.push(r);let t="cumulusci.expiryNotified",s=async(y,l)=>{let m=l.alias,f=l.data??{},w=e.workspaceState.get(t)??{},x=R(f,["is_scratch","scratch","scratch_org","isScratch"])??!1,k=R(f,["expired"])??!1,O=E(f,["days"]),{remaining:I,total:T}=zn(O),P=Jn(I,T)??"unknown remaining time",_=!1,U=()=>{m in w&&(delete w[m],_=!0)};if(!x)U();else if(k){if(w[m]!==-1){w[m]=-1,_=!0;let Q=await u.window.showErrorMessage(`Default scratch org ${m} has expired (${P??"expired"}).`,"Open Org Info","Change Default");Q==="Open Org Info"?await a(y,m):Q==="Change Default"&&await u.commands.executeCommand("cumulusci.status.showDefaultOrg")}}else if(I!==void 0&&T!==void 0&&I<=2){if(w[m]!==I){w[m]=I,_=!0;let Q=P??`${I} ${ke(I)} remaining`,J=I===0?`Default scratch org ${m} expires today (${Q}).`:`Default scratch org ${m} will expire soon (${Q}).`,M=await u.window.showWarningMessage(J,"Open Org Info","Change Default");M==="Open Org Info"?await a(y,m):M==="Change Default"&&await u.commands.executeCommand("cumulusci.status.showDefaultOrg")}}else U();_&&await e.workspaceState.update(t,w)},o=async()=>{try{let y=await i.findDefaultOrg();if(!y){n.appendLine("[status] No default org found; showing placeholder"),r.text="$(organization) No default org",r.tooltip="No default org set. Click to choose one.";let w=e.workspaceState.get(t)??{};Object.keys(w).length>0&&await e.workspaceState.update(t,{}),r.show();return}let l=y.entry.alias,m=y.entry.description??"",f=[`Default CCI Org: ${l}`,`Workspace: ${y.folder.name}`];m&&f.push(m),r.text=`$(organization) Default CCI Org: ${l}`,r.tooltip=f.join(`
`),r.show(),n.appendLine(`[status] Default org set to ${l}`),await s(y.folder,y.entry)}catch(y){let l=y instanceof Error?y.message:String(y);n.appendLine(`[status] Failed to resolve default org: ${l}`),r.text="$(organization) Org status unavailable",r.tooltip=l,r.show()}},c={orgs:new ce("orgs",i,e.extensionUri),tasks:new ce("tasks",i,e.extensionUri),flows:new ce("flows",i,e.extensionUri),project:new ce("project",i,e.extensionUri),services:new ce("services",i,e.extensionUri)},a=async(y,l)=>{let m=await i.getOrgInfo(y,l),f=Dt(l,m),w=await u.workspace.openTextDocument({language:"markdown",content:f});await u.window.showTextDocument(w,{preview:!0})},d=async(y,l)=>{let m=await i.getOrgQuickPickItems(y);if(m.length===0){let O=(await u.window.showInputBox({prompt:"Enter the org alias to use",placeHolder:"Org alias",ignoreFocusOut:!0}))?.trim();return O?{label:O,description:void 0,detail:"Custom alias",alias:O,orgCreated:!1,expired:!1,isScratch:!1,definitionOnly:!1,definitionMissing:!1,manual:!0}:void 0}let f=m.filter(k=>k.orgCreated&&!k.expired);if(f.length===1&&m.every(k=>k===f[0]||!k.orgCreated||k.expired))return f[0];let w={label:"$(edit) Enter another alias\u2026",description:"",detail:"Provide an alias not listed above",alias:"",orgCreated:!1,expired:!1,isScratch:!1,definitionOnly:!1,definitionMissing:!1,manual:!0},x=await u.window.showQuickPick([...m,w],{placeHolder:l,matchOnDetail:!0});if(x){if(x.manual){let O=(await u.window.showInputBox({prompt:"Enter the org alias to use",placeHolder:"Org alias",ignoreFocusOut:!0}))?.trim();return O?{...x,alias:O,manual:!1}:void 0}return x}},h=async y=>{if(y)return y;let l=await i.getProjectFolders();if(l.length===0){u.window.showWarningMessage("No CumulusCI project detected in the current workspace.");return}return l.length===1?l[0]:(await u.window.showQuickPick(l.map(f=>({label:f.name,description:f.uri.fsPath,folder:f})),{placeHolder:"Select a CCI project folder",matchOnDescription:!0}))?.folder},p=async()=>{let y=[{label:"Delete org after run",description:"(--delete-org)",flag:"--delete-org"},{label:"Enable debugger on error",description:"(--debug)",flag:"--debug"},{label:"Disable prompts",description:"(--no-prompt)",flag:"--no-prompt"}],l=await u.window.showQuickPick(y,{placeHolder:"Optional flags for this flow (press Enter to continue, Esc to cancel)",canPickMany:!0,ignoreFocusOut:!0});if(l===void 0)return;let m=l.map(x=>x.flag),f=await u.window.showInputBox({prompt:"Task options (-o task__option value). Enter one per line (optional).",placeHolder:"deploy_post__path ./src/\u2026",ignoreFocusOut:!0});if(f===void 0)return;m.push(...Rt(f));let w=await u.window.showInputBox({prompt:"Additional CLI arguments (optional).",placeHolder:"--delete-org --no-prompt",ignoreFocusOut:!0});if(w!==void 0)return m.push(...Mt(w)),m},v=y=>y.map(l=>l?.trim()).filter(l=>!!(l&&l.length>0)).join(" \u203A "),g=(y,l)=>{let m=[],f=(w,x)=>{let k=ne(w.label),O=w.itemKind==="group"||w.itemKind==="folder"?[...x,k].filter(I=>!!(I&&I.length>0)):x;if(w.itemKind==="task"){let I=w.data??void 0,T=k&&k.trim().length>0?k:"task",P=E(I,["name","task_name"])??T,_=oe(w.description),U=v(x),Q=[l.name];U.length>0&&Q.push(U);let J=Q.join(" \u2022 ");m.push({label:P,description:_,detail:J,taskName:P,folder:l,data:I})}for(let I of w.children??[])f(I,O)};for(let w of y)f(w,[]);return m},C=(y,l)=>{let m=[],f=(w,x)=>{let k=ne(w.label),O=w.itemKind==="group"||w.itemKind==="folder"?[...x,k].filter(I=>!!(I&&I.length>0)):x;if(w.itemKind==="flow"){let I=w.data??void 0,T=k&&k.trim().length>0?k:"flow",P=E(I,["name","flow"])??T,_=oe(w.description),U=v(x),Q=[l.name];U.length>0&&Q.push(U);let J=Q.join(" \u2022 ");m.push({label:P,description:_,detail:J,flowName:P,folder:l,data:I})}for(let I of w.children??[])f(I,O)};for(let w of y)f(w,[]);return m},b=(y,l)=>{let m=[];for(let f of y){if(f.itemKind==="service"){let w=f.data??void 0,x=ne(f.label)||E(w,["name"])||"service",k=E(w,["type"])??"",O=E(w,["typeLabel"]),I=oe(f.description),T=[l.name];O?T.push(O):k&&T.push(k);let P=T.join(" \u2022 ");m.push({label:x,description:I,detail:P,folder:l,serviceType:k,serviceName:x,typeLabel:O,data:w,isDefault:R(w,["isDefault"])??!1});continue}f.children&&m.push(...b(f.children,l))}return m},A=async()=>{let y=await i.getProjectFolders(),l=[];for(let m of y){let f=await i.listTasks(m);l.push(...g(f,m))}return l.sort((m,f)=>{let w=m.label.localeCompare(f.label);return w!==0?w:(m.detail??"").localeCompare(f.detail??"")})},D=async()=>{let y=await i.getProjectFolders(),l=[];for(let m of y){let f=await i.listFlows(m);l.push(...C(f,m))}return l.sort((m,f)=>{let w=m.label.localeCompare(f.label);return w!==0?w:(m.detail??"").localeCompare(f.detail??"")})},F=async()=>{let y=await i.getProjectFolders(),l=[];for(let m of y){let f=await i.listServices(m);l.push(...b(f,m))}return l.sort((m,f)=>{let w=m.label.localeCompare(f.label);return w!==0?w:(m.detail??"").localeCompare(f.detail??"")})},z=async(y,l)=>{let m=Ce(y);if(m){try{_e(m,"task","Task command")}catch(T){u.window.showErrorMessage(T instanceof Error?T.message:String(T));return}let w=De(m),x=m.data??void 0,k=ne(m.label)||"task",O=E(x,["name","task_name"])??k,I=oe(m.description);return{label:O,description:I,detail:w.name,taskName:O,folder:w,data:x}}let f=await A();if(f.length===0){u.window.showWarningMessage("No CCI tasks found in the current workspace.");return}return u.window.showQuickPick(f,{placeHolder:l,matchOnDescription:!0,matchOnDetail:!0})},le=async(y,l)=>{let m=Ce(y);if(m){try{_e(m,"flow","Flow command")}catch(T){u.window.showErrorMessage(T instanceof Error?T.message:String(T));return}let w=De(m),x=m.data??void 0,k=ne(m.label)||"flow",O=E(x,["name","flow"])??k,I=oe(m.description);return{label:O,description:I,detail:w.name,flowName:O,folder:w,data:x}}let f=await D();if(f.length===0){u.window.showWarningMessage("No CCI flows found in the current workspace.");return}return u.window.showQuickPick(f,{placeHolder:l,matchOnDescription:!0,matchOnDetail:!0})},q=async(y,l)=>{let m=Ce(y);if(m){try{_e(m,"org",l)}catch(U){u.window.showErrorMessage(U instanceof Error?U.message:String(U));return}let O=De(m),I=m.data??void 0,T=ne(m.label)||"org",P=E(I,["alias","name","org_name","config_name"])??T,_=oe(m.description);return{alias:P,folder:O,data:I,label:P,description:_}}let f=await i.getProjectFolders();if(f.length===0){u.window.showWarningMessage("No CumulusCI projects detected in the current workspace.");return}let w=[];for(let O of f){let I=await i.getOrgQuickPickItems(O);for(let T of I){let P=[O.name];T.detail&&P.push(T.detail),w.push({...T,detail:P.join(" \u2022 "),folder:O})}}let x=f.map(O=>({label:`$(edit) Enter alias for ${O.name}\u2026`,description:O.uri.fsPath,detail:O.name,alias:"",data:void 0,orgCreated:!1,expired:!1,isScratch:!1,definitionOnly:!1,definitionMissing:!1,manual:!0,folder:O})),k=await u.window.showQuickPick([...w,...x],{placeHolder:l,matchOnDescription:!0,matchOnDetail:!0});if(k){if(k.manual){let I=(await u.window.showInputBox({prompt:"Enter the org alias to use",placeHolder:"Org alias",ignoreFocusOut:!0}))?.trim();return I?{alias:I,folder:k.folder,data:void 0,label:I,description:k.description}:void 0}return{alias:k.alias,folder:k.folder,data:k.data,label:k.label,description:k.description}}},me=async(y,l)=>{let m=Ce(y);if(m){try{_e(m,"service",l)}catch(_){u.window.showErrorMessage(_ instanceof Error?_.message:String(_));return}let w=De(m),x=m.data??void 0,k=E(x,["type"]),O=E(x,["name"])??ne(m.label)??"service",I=E(x,["typeLabel"]);if(!k){u.window.showErrorMessage("Service type is missing for this item.");return}let T=oe(m.description),P=[w.name];return I?P.push(I):P.push(k),{label:O,description:T,detail:P.join(" \u2022 "),folder:w,serviceType:k,serviceName:O,typeLabel:I,data:x,isDefault:R(x,["isDefault"])??!1}}let f=await F();if(f.length===0){u.window.showWarningMessage("No CCI services found in the current workspace.");return}return u.window.showQuickPick(f,{placeHolder:l,matchOnDescription:!0,matchOnDetail:!0})};e.subscriptions.push(u.window.registerTreeDataProvider("cumulusci.orgs",c.orgs),u.window.registerTreeDataProvider("cumulusci.tasks",c.tasks),u.window.registerTreeDataProvider("cumulusci.flows",c.flows),u.window.registerTreeDataProvider("cumulusci.project",c.project),u.window.registerTreeDataProvider("cumulusci.services",c.services)),o();let L=y=>{c[y].refresh(),y==="orgs"&&o()};e.subscriptions.push(u.commands.registerCommand("cumulusci.refreshOrgs",()=>L("orgs")),u.commands.registerCommand("cumulusci.refreshTasks",()=>L("tasks")),u.commands.registerCommand("cumulusci.refreshFlows",()=>L("flows")),u.commands.registerCommand("cumulusci.refreshProjectInfo",()=>L("project")),u.commands.registerCommand("cumulusci.refreshServices",()=>L("services"))),e.subscriptions.push(u.commands.registerCommand("cumulusci.status.showDefaultOrg",async()=>{try{let y=await i.getProjectFolders();if(y.length===0){u.window.showWarningMessage("No CumulusCI projects detected in the current workspace.");return}let l=await i.findDefaultOrg(),m=[];for(let w of y){let x=await i.getOrgQuickPickItems(w);for(let k of x){let O=l!==void 0&&l.entry.alias===k.alias&&l.folder.uri.fsPath===w.uri.fsPath;m.push({label:k.label,description:w.name,detail:O?"Current default":k.detail,action:"set",alias:k.alias,folder:w})}}if(l&&m.unshift({label:"$(circle-slash) Clear default org",description:l.folder.name,detail:`Currently ${l.entry.alias}`,action:"clear",alias:l.entry.alias,folder:l.folder}),m.length===0){u.window.showInformationMessage("No orgs available to set as default.");return}let f=await u.window.showQuickPick(m,{placeHolder:l?"Select an org to make default or clear the current default":"Select an org to set as the CCI default",matchOnDescription:!0,matchOnDetail:!0});if(!f)return;if(f.action==="clear"){if(!f.folder)return;await u.window.withProgress({location:u.ProgressLocation.Window,title:"Clearing CCI default org\u2026"},async()=>{await i.runCciCommand(f.folder,["org","default","--unset"])}),u.window.showInformationMessage("Cleared the CCI default org."),L("orgs");return}if(!f.folder||!f.alias)return;await u.window.withProgress({location:u.ProgressLocation.Window,title:`Setting default org to ${f.alias}\u2026`},async()=>{await i.runCciCommand(f.folder,["org","default",f.alias])}),u.window.showInformationMessage(`Set ${f.alias} as the CCI default org.`),L("orgs")}catch(y){u.window.showErrorMessage(y instanceof Error?y.message:String(y))}}),u.commands.registerCommand("cumulusci.service.showInfo",async y=>{try{let l=await me(y,"Select a service to inspect");if(!l)return;let{folder:m,serviceType:f,serviceName:w,typeLabel:x}=l;if(!f){u.window.showErrorMessage("Service type is required to show service info.");return}let k=x??xe(f),O=await i.getServiceInfo(m,f,w),I=_t(k,w,O),T=await u.workspace.openTextDocument({language:"markdown",content:I});await u.window.showTextDocument(T,{preview:!0})}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.service.connect",async y=>{try{let l=Ce(y),m=await h(l?.workspaceFolder);if(!m)return;let f=l?.data??{},w=E(f,["type"]),x=E(f,["typeLabel"]),k=Array.isArray(f.attributes)?f.attributes:[];if(!w){let M=await i.getServiceTypeGroups(m);if(M.length===0){u.window.showWarningMessage("CCI did not report any service types to connect.");return}let H=await u.window.showQuickPick(M.map(Y=>({label:Y.label,description:Y.description||void 0,detail:Y.entries.length>0?`${Y.entries.length} configured`:void 0,value:Y.type,attributes:Y.attributes})),{placeHolder:"Select a service type to connect",matchOnDescription:!0});if(!H)return;w=H.value,x=H.label,k=H.attributes}if(!w)return;if(k.length===0){let H=(await i.getServiceTypeGroups(m)).find(Y=>Y.type===w);H&&(k=H.attributes,x||(x=H.label))}x||(x=xe(w));let O=await u.window.showInputBox({prompt:"Optional service name (press Enter to accept the default)",placeHolder:"Leave blank to let CCI decide",ignoreFocusOut:!0});if(O===void 0)return;let I=O.trim(),T=[{label:"Set as global default (--default)",description:"Applies to all projects",flag:"--default"},{label:"Set as project default (--project)",description:"Scoped to this workspace",flag:"--project"}],P=await u.window.showQuickPick(T,{placeHolder:"Select optional flags for this service (Esc to skip)",canPickMany:!0,ignoreFocusOut:!0});if(P===void 0)return;let _=["cci","service","connect",w];if(I.length>0&&_.push(Re(I)),P&&P.length>0)for(let M of P)M.flag&&_.push(M.flag);let U=k.length>0;if(U)for(let M of k){let H=!!(M.defaultValue||M.defaultFactory),Y=M.required&&!H,Zn=M.description??`Enter value for ${M.name}`,ei=Y?"Required":H?"Optional (leave blank to let CCI provide a default)":"Optional",be;for(;;){let Ze=await u.window.showInputBox({prompt:`${ei}: ${Zn}`,placeHolder:H?"Leave blank to use CLI default":void 0,ignoreFocusOut:!0,value:M.sensitive?void 0:M.defaultValue,password:M.sensitive});if(Ze===void 0)return;let en=Ze.trim();if(en.length===0){if(M.defaultValue!==void 0){be=M.defaultValue;break}if(Y){await u.window.showErrorMessage(`A value is required for ${M.name}.`);continue}break}be=en;break}be!==void 0&&(_.push(`--${M.name}`),_.push(Re(be)))}let Q=x??xe(w),J=u.window.createTerminal({name:`CCI: Connect ${Q}`,cwd:m.uri});J.show(!0),J.sendText(_.join(" "),!0),U?u.window.showInformationMessage(`Opened a terminal to run "${_.join(" ")}". Review or adjust values in the terminal if needed.`):u.window.showInformationMessage(`Opened a terminal to run "${_.join(" ")}".`)}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.service.setDefault",async y=>{try{let l=await me(y,"Select a service to set as default");if(!l)return;let{folder:m,serviceType:f,serviceName:w}=l;if(!f||!w){u.window.showErrorMessage("Service type and name are required to set a default.");return}let x=await u.window.showQuickPick([{label:"Global default",description:"Applies to all projects",flag:void 0},{label:"Project default",description:"Applies only to this workspace",flag:"--project"}],{placeHolder:"Select default scope"});if(!x)return;let k=["service","default"];x.flag&&k.push(x.flag),k.push(f,w);let O=await i.runCciCommand(m,k);O.trim().length>0&&(n.appendLine(O.trim()),n.show(!0)),L("services")}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.service.remove",async y=>{try{let l=await me(y,"Select a service to remove");if(!l)return;let{folder:m,serviceType:f,serviceName:w,typeLabel:x}=l;if(!f||!w){u.window.showErrorMessage("Service type and name are required to remove a service.");return}let k=x??xe(f);if(await u.window.showWarningMessage(`Remove service "${w}" (${k})?`,{modal:!0},"Remove")!=="Remove")return;await i.runCciCommand(m,["service","remove",f,w]),u.window.showInformationMessage(`Removed service "${w}" (${k}).`),L("services")}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.service.rename",async y=>{try{let l=await me(y,"Select a service to rename");if(!l)return;let{folder:m,serviceType:f,serviceName:w}=l;if(!f||!w){u.window.showErrorMessage("Service type and name are required to rename a service.");return}let x=await u.window.showInputBox({prompt:"Enter the new service name",value:w,ignoreFocusOut:!0});if(x===void 0)return;let k=x.trim();if(!k||k===w)return;await i.runCciCommand(m,["service","rename",f,w,k]),L("services")}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}})),e.subscriptions.push(u.commands.registerCommand("cumulusci.runTask",async y=>{try{let l=await z(y,"Select a CCI task to run");if(!l)return;let{folder:m,taskName:f}=l,w=`CCI Task: ${f}`,x=u.window.terminals.find(k=>k.name===w);x||(x=u.window.createTerminal({name:w,cwd:m.uri})),x.show(),x.sendText(`cci task run ${f} `,!1)}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.copyTaskCommand",async y=>{try{let l=await z(y,"Select a CCI task to copy");if(!l)return;await u.env.clipboard.writeText(`cci task run ${l.taskName}`),u.window.showInformationMessage(`Copied: cci task run ${l.taskName}`)}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.runFlow",async y=>{try{let l=await le(y,"Select a CCI flow to run");if(!l)return;let{folder:m,flowName:f}=l,w=await d(m,"Select an org to run this flow against");if(!w)return;let x=w.alias.trim();if(!x)return;let k=await p();if(k===void 0)return;let I=["cci","flow","run",f,"--org",x,...k].map(Re).join(" ");await u.window.withProgress({location:u.ProgressLocation.Notification,title:`Running flow ${f} against ${x}`},async()=>{let T=`CCI Flow: ${f}`,P=u.window.terminals.find(_=>_.name===T);P||(P=u.window.createTerminal({name:T,cwd:m.uri})),P.show(),P.sendText(I)})}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.copyFlowCommand",async y=>{try{let l=await le(y,"Select a CCI flow to copy");if(!l)return;await u.env.clipboard.writeText(`cci flow run ${l.flowName} --org <org>`),u.window.showInformationMessage(`Copied: cci flow run ${l.flowName} --org <org>`)}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.org.showActions",async y=>{try{let l=await q(y,"Select an org to manage");if(!l)return;let{folder:m,alias:f,data:w,description:x}=l,k=w??{},O=x?` (${x})`:"",I={label:f,description:x,detail:void 0,alias:f,data:w,orgCreated:R(k,["orgCreated"])??!1,expired:R(k,["expired"])??!1,isScratch:R(k,["scratch","scratch_org","is_scratch","isScratch"])??!1,definitionOnly:R(k,["definitionOnly"])??!1,definitionMissing:R(k,["definitionMissing"])??!1,manual:!1},T=[{...I,label:"Open in Browser",detail:`cci org browser ${f}`,action:"open"},{...I,label:"Show Org Info",detail:`cci org info ${f}`,action:"info"},{...I,label:"Set as Default Org",detail:`cci org default ${f}`,action:"default"},{...I,label:"Copy Org Alias",detail:f,action:"copy"}],P=await u.window.showQuickPick(T,{placeHolder:`Choose an action for ${f}${O}`});if(!P)return;switch(P.action){case"open":{n.appendLine(`$ cci org browser ${f}`),await i.runCciCommand(m,["org","browser",f]);break}case"info":{await a(m,f);break}case"default":{n.appendLine(`$ cci org default ${f}`);let _=await i.runCciCommand(m,["org","default",f]);_.trim().length>0&&(n.appendLine(_.trim()),n.show(!0)),L("orgs");break}case"copy":{await u.env.clipboard.writeText(f),u.window.showInformationMessage(`Copied org alias: ${f}`);break}}}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.org.openInBrowser",async y=>{try{let l=await q(y,"Select an org to open in the browser");if(!l)return;let{folder:m,alias:f}=l;n.appendLine(`$ cci org browser ${f}`),await i.runCciCommand(m,["org","browser",f])}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.org.showInfo",async y=>{try{let l=await q(y,"Select an org to inspect");if(!l)return;let{folder:m,alias:f}=l;n.appendLine(`$ cci org info ${f} --json`),await a(m,f)}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.org.setDefault",async y=>{try{let l=await q(y,"Select an org to set as default");if(!l)return;let{folder:m,alias:f}=l;n.appendLine(`$ cci org default ${f}`);let w=await i.runCciCommand(m,["org","default",f]);w.trim().length>0&&(n.appendLine(w.trim()),n.show(!0)),L("orgs")}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}}),u.commands.registerCommand("cumulusci.copyOrgAlias",async y=>{try{let l=await q(y,"Select an org alias to copy");if(!l)return;await u.env.clipboard.writeText(l.alias),u.window.showInformationMessage(`Copied org alias: ${l.alias}`)}catch(l){u.window.showErrorMessage(l instanceof Error?l.message:String(l))}})),e.subscriptions.push(u.commands.registerCommand("cumulusci.helloWorld",()=>{u.window.showInformationMessage("Hello World from cumulusci!")})),e.subscriptions.push(u.workspace.onDidChangeWorkspaceFolders(()=>{L("orgs"),L("tasks"),L("flows"),L("project"),L("services")}))}function jt(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
